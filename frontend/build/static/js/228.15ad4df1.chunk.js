"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[228],{228:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var i=n(43),o=n(299),s=n(37),r=n(309),a=n(836),l=n(903),h=n(724),c=n(292),d=n(579);function f(e){let{height:t="92vh"}=e;const n=(0,i.useRef)(null),[o,s]=(0,i.useState)(Array.from({length:8},(e,t)=>({angle:Math.random()*Math.PI*2,dist:0,speed:.008+.012*Math.random(),radius:38+18*Math.random(),hue:360*Math.random(),t:1e3*Math.random()})));function r(e,t,n){let i,o,s;if(0===t)i=o=s=n;else{const r=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=r(l,a,e+1/3),o=r(l,a,e),s=r(l,a,e-1/3)}return[Math.round(255*i),Math.round(255*o),Math.round(255*s)]}return(0,i.useEffect)(()=>{const e=n.current;if(!e)return;let i=!0,a=window.innerWidth,l="string"===typeof t&&t.endsWith("vh")?window.innerHeight*(parseFloat(t)/100):window.innerHeight;function h(){a=window.innerWidth,l="string"===typeof t&&t.endsWith("vh")?window.innerHeight*(parseFloat(t)/100):window.innerHeight,e.width=a,e.height=l}return e.width=a,e.height=l,function t(){if(!i)return;s(e=>e.map((e,t)=>{let n=e.t+1,i=Math.min(e.dist+2*e.speed,.45*a),o=e.angle+.01*Math.sin(n/120+t),s=38+18*Math.sin(n/40+t),r=(e.hue+.3+.2*Math.sin(n/200+t))%360;return{...e,t:n,dist:i,angle:o,radius:s,hue:r}}));const n=e.getContext("2d");n.clearRect(0,0,a,l),n.globalAlpha=1,n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,a,l);const h=n.getImageData(0,0,a,l),c=h.data;for(let e=0;e<l;e+=2)for(let t=0;t<a;t+=2){let n=0,i=[0,0,0];for(let s of o){const o=t-(a/2+Math.cos(s.angle)*s.dist),h=e-(l/2+Math.sin(s.angle)*s.dist),c=s.radius;n+=c*c/(o*o+h*h+1);const d=r(s.hue/360,1,.6);i[0]+=d[0],i[1]+=d[1],i[2]+=d[2]}if(n>1.2){let s=i.map(e=>Math.min(255,e/o.length)),r=4*(e*a+t);c[r]=s[0],c[r+1]=s[1],c[r+2]=s[2],c[r+3]=Math.min(255,80*(n-1.2))}}n.putImageData(h,0,0),requestAnimationFrame(t)}(),window.addEventListener("resize",h),()=>{i=!1,window.removeEventListener("resize",h)}},[o,t]),(0,d.jsx)("canvas",{ref:n,style:{position:"absolute",top:0,left:0,width:"100vw",height:t,zIndex:2,pointerEvents:"none",mixBlendMode:"lighter"}})}function u(e){let{current:t,hovered:n,setHovered:s,big:l,items:c}=e;const f=(l?10:6)+(l?1.2:.8)*Math.sqrt(c.length),u=Math.max(c.length,1),g=(0,i.useRef)(),[w,p]=(0,i.useState)(!0),[m,x]=(0,i.useState)(0),v=(0,i.useRef)(Date.now()),y=(0,i.useRef)(t),j=-2*Math.PI/u*t,{rotationY:M}=(0,h.zh)({rotationY:w?m:j,config:{mass:1,tension:170,friction:26}});(0,o.D)(()=>{w&&g.current&&x(e=>e+.008),!w&&Date.now()-v.current>3e3&&y.current===t&&p(!0)}),(0,i.useEffect)(()=>{p(!1),v.current=Date.now(),y.current=t},[t]);const{camera:b}=(0,o.C)();return(0,i.useEffect)(()=>{function e(e){const t=2*(e.clientX/window.innerWidth-.5),n=2*(e.clientY/window.innerHeight-.5);b.position.x=2.5*t,b.position.y=1.5*-n,b.lookAt(0,0,0)}return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[b]),c&&0!==c.length?(0,d.jsx)(h.CS.group,{ref:g,position:[0,0,0],"rotation-y":M,children:c.map((e,i)=>{const o=2*Math.PI/u*i,c=Math.sin(o)*f,g=Math.cos(o)*f,w=i===t,p=n===i,m=Date.now()/1e3+.5*i,x=.7+.3*Math.sin(m);let v=i%2===0?`hsl(${180+10*Math.sin(m)},100%,60%)`:`hsl(${50+10*Math.sin(m)},100%,60%)`,y=i%2===0?`hsl(${320+10*Math.sin(m)},100%,60%)`:`hsl(${200+10*Math.sin(m)},100%,60%)`;const j=w&&p?y:v,M=w||p?v:"#333",b=Math.abs((180*o/Math.PI+360)%360)>90&&Math.abs((180*o/Math.PI+360)%360)<270,{scale:S,emissiveIntensity:E}=(0,h.zh)({scale:p?l?1.75:1.55:w?(l?1.65:1.45)+.05*Math.sin(Date.now()/200):1,emissiveIntensity:(w||p?1.2:.5)*x,config:{mass:1,tension:170,friction:18}}),k=3===i;return(0,d.jsxs)("group",{position:[c,0,g],rotation:[0,-o,0],children:[(0,d.jsxs)("mesh",{position:[0,0,.5],onPointerOver:()=>s(i),onPointerOut:()=>s(null),children:[(0,d.jsx)("planeGeometry",{args:[l?6.5:4.5,l?4.2:3.2]}),(0,d.jsx)("meshBasicMaterial",{transparent:!0,opacity:0})]}),(0,d.jsx)(h.CS.mesh,{scale:S.to(e=>[e,e,e]),castShadow:!0,receiveShadow:!0,children:(0,d.jsxs)(a.b,{args:[l?4.8:3,l?3:2.1,l?.62:.44],radius:l?.48:.3,smoothness:6,edges:{color:j,thickness:l?2.2:1.2},children:[(0,d.jsx)(a.b,{args:[l?3.6:2.4,l?1.88:1.28,l?.17:.08],radius:l?.48:.3,smoothness:5,position:[0,0,l?.3:.21],children:(0,d.jsx)("meshPhysicalMaterial",{color:j,emissive:j,emissiveIntensity:1.7*x,opacity:.38,transparent:!0,metalness:.4,roughness:.18})}),(0,d.jsxs)("mesh",{position:[0,0,l?.46:.36],children:[(0,d.jsx)("planeGeometry",{args:[l?6:4.2,l?3.6:2.7]}),(0,d.jsx)("meshBasicMaterial",{color:j,opacity:w||p?.48:.28,transparent:!0})]}),(0,d.jsx)(h.CS.meshPhysicalMaterial,{color:"#fff",emissive:w||p?j:"#6cf",emissiveIntensity:E.to(e=>1.7*e),opacity:.95,transparent:!0,clearcoat:1,clearcoatRoughness:.15,reflectivity:.85,metalness:.2}),(0,d.jsx)("shadowMaterial",{attach:"material",opacity:.35})]})}),(0,d.jsx)(r.E,{center:!0,style:{pointerEvents:"auto",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},rotation:[0,-o,0],transform:`skewY(${6*Math.sin(o)}deg) rotateZ(${8*o/Math.PI}deg)`,children:(0,d.jsxs)("a",{href:e.link,style:{textDecoration:"none",color:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,d.jsx)("img",{src:e.img,alt:e.title,style:{width:l?195:125,height:l?138:83,borderRadius:12,boxShadow:w||p?`0 0 0 ${l?8:4}px ${M}`:`0 0 0 ${l?4:2}px #333`,marginBottom:12,opacity:w?1:.7,filter:w||p?"grayscale(10%)":"grayscale(30%) blur(1px)",transform:`skewY(${6*Math.sin(o)}deg) rotateZ(${8*o/Math.PI}deg)`,transition:"box-shadow 0.2s, filter 0.2s",display:"block",marginLeft:"auto",marginRight:"auto"}}),(0,d.jsx)("div",{style:{fontWeight:"bold",fontSize:l?"1.7em":"1.1em",color:b||w||p?"#fff":i%2===0?"#ff4fa3":"#00fff7",textShadow:w||p?"0 0 2px #000, 0 0 8px #fff":`0 0 2px ${v}`,filter:(w||p?"none":"blur(0.5px)")+" contrast(1.2) invert(1)",transform:"SensationalX Furry Night"===e.title||k?"scaleX(-1)":void 0,transition:"filter 0.2s",textAlign:"center",margin:"0 auto",width:"100%",lineHeight:1.2},children:e.title}),(0,d.jsx)("div",{style:{fontSize:l?"1.2em":"0.9em",color:b?"#fff":"#aaa",filter:"invert(1) contrast(1.2)",transition:"filter 0.2s",transform:"SensationalX Furry Night"===e.title||k?"scaleX(-1)":void 0,textAlign:"center",margin:"0 auto",width:"100%",lineHeight:1.2},children:e.desc})]})})]},i)})}):null}function g(){const e=(0,i.useRef)(null);return(0,i.useEffect)(()=>{const t=e.current;if(!t)return;const n=t.getContext("2d");let i=!0,o=window.innerWidth,s=window.innerHeight;function r(){o=window.innerWidth,s=window.innerHeight,t.width=o,t.height=s}return t.width=o,t.height=s,function e(){i&&(!function(e){n.clearRect(0,0,o,s),n.fillStyle="#0a0a2a",n.fillRect(0,0,o,s);const t=o/2,i=s/2,r=Math.PI/4;n.save(),n.translate(t,i),n.rotate(r);for(let o=0;o<7;o++){const t=80+90*o+40*Math.sin(e/900+o);n.beginPath(),n.arc(0,0,t,0,2*Math.PI),n.closePath(),n.globalAlpha=.13+.07*Math.sin(e/700+o),n.fillStyle=o%2===0?"#00fff7":"#ff4fa3",n.fill()}n.restore(),n.globalAlpha=1}(Date.now()),requestAnimationFrame(e))}(),window.addEventListener("resize",r),()=>{i=!1,window.removeEventListener("resize",r)}},[]),(0,d.jsx)("canvas",{ref:e,style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",background:"#0a0a2a"}})}function w(e){let{color:t="#fff",dotSize:n=2,spacing:o=10,opacity:s=.13}=e;const r=(0,i.useRef)(null);return(0,i.useEffect)(()=>{const e=r.current;if(!e)return;let i=!0,a=window.innerWidth,l=window.innerHeight;function h(){if(!i)return;const r=e.getContext("2d");r.clearRect(0,0,a,l),r.globalAlpha=s;for(let e=0;e<l;e+=o)for(let i=0;i<a;i+=o)r.beginPath(),r.arc(i,e,n,0,2*Math.PI),r.fillStyle=t,r.fill();r.globalAlpha=1}function c(){a=window.innerWidth,l=window.innerHeight,e.width=a,e.height=l,h()}return e.width=a,e.height=l,h(),window.addEventListener("resize",c),()=>{i=!1,window.removeEventListener("resize",c)}},[t,n,o,s]),(0,d.jsx)("canvas",{ref:r,style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:1,pointerEvents:"none",mixBlendMode:"soft-light"}})}function p(e){let{direction:t,style:n}=e;const{scale:i,shadow:o}=(0,c.zh)({from:{scale:1,shadow:.5},to:async e=>{for(;;)await e({scale:1.18,shadow:1}),await e({scale:1,shadow:.5})},config:{mass:1,tension:120,friction:10},loop:!0});let s=0,r="",a="",l="";return"tl"===t&&(s=-135,r="arrowGradTL",a="#ff4fa3",l="#fff1fa"),"tr"===t&&(s=-45,r="arrowGradTR",a="#00fff7",l="#e0ffff"),"bl"===t&&(s=135,r="arrowGradBL",a="#ffe14f",l="#fffbe0"),"br"===t&&(s=45,r="arrowGradBR",a="#a080ff",l="#e0e0ff"),(0,d.jsx)(c.CS.div,{style:{position:"fixed",...n,zIndex:10002,width:72,height:72,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",pointerEvents:"none",transform:i.to(e=>`scale(${e}) rotate(${s}deg)`),filter:"drop-shadow(0 0 18px "+a+")",transition:"transform 0.2s"},children:(0,d.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("defs",{children:(0,d.jsxs)("linearGradient",{id:r,x1:"0",y1:"0",x2:"64",y2:"64",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{offset:"0%",stopColor:l}),(0,d.jsx)("stop",{offset:"60%",stopColor:a}),(0,d.jsx)("stop",{offset:"100%",stopColor:"#222"})]})}),(0,d.jsx)("rect",{x:"28",y:"16",width:"8",height:"28",rx:"4",fill:`url(#${r})`,stroke:"#fff",strokeWidth:"1.5"}),(0,d.jsx)("polygon",{points:"32,6 54,34 44,34 44,54 20,54 20,34 10,34",fill:`url(#${r})`,stroke:"#fff",strokeWidth:"2.5"}),(0,d.jsx)("ellipse",{cx:"32",cy:"22",rx:"7",ry:"2.2",fill:"#fff",opacity:"0.18"})]})})}const m=function(e){const[t,n]=(0,i.useState)(0),[o,a]=(0,i.useState)(null),[h,m]=(0,i.useState)([]),[x,v]=(0,i.useState)(!0),y=(0,i.useRef)(null),j=(0,i.useRef)(null),[M,b]=(0,i.useState)(!1),{scale:S}=(0,c.zh)({from:{scale:1},to:async e=>{for(;;)await e({scale:1.08}),await e({scale:1})},config:{mass:1,tension:120,friction:10},loop:!0}),E=()=>{const e=j.current;e&&(e.volume=.12,e.currentTime=0,e.play())};(0,i.useEffect)(()=>{function e(e){I<=0||("ArrowLeft"===e.key&&(n(e=>(e-1+I)%I),E()),"ArrowRight"===e.key&&(n(e=>(e+1)%I),E()),M||"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||k())}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[M]);const k=()=>{const e=y.current;e&&(e.muted=!1,e.volume=.85,b(!0))};(0,i.useEffect)(()=>{if(!y.current)return;const e=()=>{k(),window.removeEventListener("pointerdown",e)};return window.addEventListener("pointerdown",e),()=>window.removeEventListener("pointerdown",e)},[]),(0,i.useEffect)(()=>{const e=y.current;e&&M&&e.play()},[M]),(0,i.useEffect)(()=>{fetch("/sinbound-demo-2/songdatabase.json").then(e=>e.json()).then(e=>{const t=e.map(e=>({img:"/sinbound-demo-2/mix-coverimage/"+e.coverimage,title:e.title,desc:e.description,link:"/trackplayer?track="+e.link}));m(t),v(!1)}).catch(()=>v(!1))},[]);const I=h.length;return(0,i.useEffect)(()=>{h.length>0&&t>=h.length&&n(h.length-1),h.length>0&&t<0&&n(0)},[h,t]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g,{}),(0,d.jsx)(w,{}),(0,d.jsx)(f,{}),(0,d.jsx)(p,{direction:"tl",style:{left:12,top:12}}),(0,d.jsx)(p,{direction:"tr",style:{right:12,top:12}}),(0,d.jsx)(p,{direction:"bl",style:{left:12,bottom:12}}),(0,d.jsx)(p,{direction:"br",style:{right:12,bottom:12}}),(0,d.jsxs)("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",zIndex:10,pointerEvents:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,d.jsx)("audio",{ref:y,src:"/sinbound-demo-2/birkin loop.wav",preload:"auto",loop:!0,muted:!0,style:{display:"none"}}),(0,d.jsx)("audio",{ref:j,src:"/sinbound-demo-2/sfx001.wav",preload:"auto",style:{display:"none"}}),(0,d.jsx)(c.CS.h1,{style:{color:"#fff",fontFamily:"MS Gothic, MS PGothic, Meiryo, monospace",fontSize:"2.6em",letterSpacing:2,textTransform:"uppercase",textAlign:"center",margin:"0 0 32px 0",textShadow:"0 0 18px #00fff7, 0 0 8px #fff",filter:"contrast(1.2)",userSelect:"none",pointerEvents:"auto",willChange:"transform",transform:S.to(e=>`scale(${e})`)},children:"choose a track"}),(0,d.jsx)("div",{style:{width:"100vw",height:"85vh",maxWidth:1600,margin:"0 auto",position:"relative",zIndex:10,pointerEvents:"auto"},children:x?(0,d.jsx)("div",{style:{color:"#fff",textAlign:"center",fontSize:24,marginTop:80},children:"Loading carousel..."}):(0,d.jsx)(d.Fragment,{children:!x&&h.length>0&&(0,d.jsxs)(s.Hl,{shadows:!0,camera:{position:[0,0,Math.max(28,18+2.5*Math.sqrt(h.length)*1.5)],fov:54},style:{width:"100%",height:"100%",background:"none",borderRadius:0,boxShadow:"none",pointerEvents:"auto"},children:[(0,d.jsx)("ambientLight",{intensity:.7}),(0,d.jsx)("directionalLight",{position:[0,8,8],intensity:1.2,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),(0,d.jsx)(l.s0,{children:(0,d.jsx)(l.mK,{luminanceThreshold:.18,luminanceSmoothing:.7,intensity:1.2})}),(0,d.jsx)(u,{current:t,hovered:o,setHovered:a,big:!0,items:h}),(0,d.jsxs)(r.E,{center:!0,style:{pointerEvents:"none",width:"100vw",height:"100%",left:0,top:0,zIndex:1e3},children:[(0,d.jsx)("div",{style:{position:"absolute",left:0,top:0,width:80,height:"100%",background:"linear-gradient(90deg, #000 60%, transparent)",zIndex:1e3,pointerEvents:"none"}}),(0,d.jsx)("div",{style:{position:"absolute",right:0,top:0,width:80,height:"100%",background:"linear-gradient(270deg, #000 60%, transparent)",zIndex:1e3,pointerEvents:"none"}})]})]})})})]})]})}}}]);
//# sourceMappingURL=228.15ad4df1.chunk.js.map