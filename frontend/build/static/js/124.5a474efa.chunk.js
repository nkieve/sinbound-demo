"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[124],{86:(e,t,n)=>{n.d(t,{$s:()=>f,Ao:()=>a,De:()=>x,SJ:()=>m,nm:()=>l,pS:()=>h,rf:()=>c,uX:()=>o});var r=n(555),s=n(43),i=Symbol.for("Animated:node"),a=e=>e&&e[i],o=(e,t)=>(0,r.OX)(e,i,t),l=e=>e&&e[i]&&e[i].getPayload(),u=class{constructor(){o(this,this)}getPayload(){return this.payload||[]}},c=class e extends u{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,r.is.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new e(t)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return r.is.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,r.is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},h=class e extends c{constructor(e){super(0),this._string=null,this._toString=(0,r.kx)({output:[e,e]})}static create(t){return new e(t)}getValue(){const e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(r.is.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=(0,r.kx)({output:[this.getValue(),e]})),this._value=0,super.reset()}},d={dependencies:null},f=class extends u{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return(0,r.FI)(this.source,(n,s)=>{var a;(a=n)&&a[i]===a?t[s]=n.getValue(e):(0,r.at)(n)?t[s]=(0,r.oq)(n):e||(t[s]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&(0,r.__)(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return(0,r.FI)(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){d.dependencies&&(0,r.at)(e)&&d.dependencies.add(e);const t=l(e);t&&(0,r.__)(t,e=>this.add(e))}},p=class e extends f{constructor(e){super(e)}static create(t){return new e(t)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((t,n)=>t.setValue(e[n])).some(Boolean):(super.setValue(e.map(v)),!0)}};function v(e){return((0,r.$7)(e)?h:c).create(e)}function m(e){const t=a(e);return t?t.constructor:r.is.arr(e)?p:(0,r.$7)(e)?h:c}var g=(e,t)=>{const n=!r.is.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,s.forwardRef)((i,a)=>{const o=(0,s.useRef)(null),l=n&&(0,s.useCallback)(e=>{o.current=function(e,t){e&&(r.is.fun(e)?e(t):e.current=t);return t}(a,e)},[a]),[u,c]=function(e,t){const n=new Set;d.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)});return e=new f(e),d.dependencies=null,[e,n]}(i,t),h=(0,r.CH)(),p=()=>{const e=o.current;if(n&&!e)return;!1===(!!e&&t.applyAnimatedValues(e,u.getValue(!0)))&&h()},v=new y(p,c),m=(0,s.useRef)(void 0);(0,r.Es)(()=>(m.current=v,(0,r.__)(c,e=>(0,r.Ec)(e,v)),()=>{m.current&&((0,r.__)(m.current.deps,e=>(0,r.DV)(e,m.current)),r.er.cancel(m.current.update))})),(0,s.useEffect)(p,[]),(0,r.H5)(()=>()=>{const e=m.current;(0,r.__)(e.deps,t=>(0,r.DV)(t,e))});const g=t.getComponentProps(u.getValue());return s.createElement(e,{...g,ref:l})})},y=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&r.er.write(this.update)}};var w=Symbol.for("AnimatedComponent"),x=function(e){let{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=e=>new f(e),getComponentProps:s=e=>e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:s},a=e=>{const t=S(e)||"Anonymous";return(e=r.is.str(e)?a[e]||(a[e]=g(e,i)):e[w]||(e[w]=g(e,i))).displayName=`Animated(${t})`,e};return(0,r.FI)(e,(t,n)=>{r.is.arr(e)&&(n=S(t)),a[n]=a(t)}),{animated:a}},S=e=>r.is.str(e)?e:e&&r.is.str(e.displayName)?e.displayName:r.is.fun(e)&&e.name||null},168:(e,t,n)=>{function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},292:(e,t,n)=>{n.d(t,{CS:()=>w,zh:()=>r.zh});var r=n(814),s=n(950),i=n(555),a=n(86),o=/^--/;function l(e,t){return null==t||"boolean"===typeof t||""===t?"":"number"!==typeof t||0===t||o.test(e)||c.hasOwnProperty(e)&&c[e]?(""+t).trim():t+"px"}var u={};var c={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},h=["Webkit","Ms","Moz","O"];c=Object.keys(c).reduce((e,t)=>(h.forEach(n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t]),e),c);var d=/^(matrix|translate|scale|rotate|skew)/,f=/^(translate)/,p=/^(rotate|skew)/,v=(e,t)=>i.is.num(e)&&0!==e?e+t:e,m=(e,t)=>i.is.arr(e)?e.every(e=>m(e,t)):i.is.num(e)?e===t:parseFloat(e)===t,g=class extends a.$s{constructor(e){let{x:t,y:n,z:r,...s}=e;const a=[],o=[];(t||n||r)&&(a.push([t||0,n||0,r||0]),o.push(e=>[`translate3d(${e.map(e=>v(e,"px")).join(",")})`,m(e,0)])),(0,i.FI)(s,(e,t)=>{if("transform"===t)a.push([e||""]),o.push(e=>[e,""===e]);else if(d.test(t)){if(delete s[t],i.is.und(e))return;const n=f.test(t)?"px":p.test(t)?"deg":"";a.push((0,i.$r)(e)),o.push("rotate3d"===t?e=>{let[t,r,s,i]=e;return[`rotate3d(${t},${r},${s},${v(i,n)})`,m(i,0)]}:e=>[`${t}(${e.map(e=>v(e,n)).join(",")})`,m(e,t.startsWith("scale")?1:0)])}}),a.length&&(s.transform=new y(a,o)),super(s)}},y=class extends i.aq{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return(0,i.__)(this.inputs,(n,r)=>{const s=(0,i.oq)(n[0]),[a,o]=this.transforms[r](i.is.arr(s)?s:n.map(i.oq));e+=" "+a,t=t&&o}),t?"none":e}observerAdded(e){1==e&&(0,i.__)(this.inputs,e=>(0,i.__)(e,e=>(0,i.at)(e)&&(0,i.Ec)(e,this)))}observerRemoved(e){0==e&&(0,i.__)(this.inputs,e=>(0,i.__)(e,e=>(0,i.at)(e)&&(0,i.DV)(e,this)))}eventObserved(e){"change"==e.type&&(this._value=null),(0,i.MI)(this,e)}};r.RV.assign({batchedUpdates:s.unstable_batchedUpdates,createStringInterpolator:i.Rs,colors:i.Tj});var w=(0,a.De)(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{className:r,style:s,children:i,scrollTop:a,scrollLeft:c,viewBox:h,...d}=t,f=Object.values(d),p=Object.keys(d).map(t=>n||e.hasAttribute(t)?t:u[t]||(u[t]=t.replace(/([A-Z])/g,e=>"-"+e.toLowerCase())));void 0!==i&&(e.textContent=i);for(const u in s)if(s.hasOwnProperty(u)){const t=l(u,s[u]);o.test(u)?e.style.setProperty(u,t):e.style[u]=t}p.forEach((t,n)=>{e.setAttribute(t,f[n])}),void 0!==r&&(e.className=r),void 0!==a&&(e.scrollTop=a),void 0!==c&&(e.scrollLeft=c),void 0!==h&&e.setAttribute("viewBox",h)},createAnimatedStyle:e=>new g(e),getComponentProps:e=>{let{scrollTop:t,scrollLeft:n,...r}=e;return r}}).animated},309:(e,t,n)=>{n.d(t,{E:()=>y});var r=n(168),s=n(43),i=n(391),a=n(435),o=n(299);const l=new a.Pq0,u=new a.Pq0,c=new a.Pq0,h=new a.I9Y;function d(e,t,n){const r=l.setFromMatrixPosition(e.matrixWorld);r.project(t);const s=n.width/2,i=n.height/2;return[r.x*s+s,-r.y*i+i]}const f=e=>Math.abs(e)<1e-10?0:e;function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="matrix3d(";for(let s=0;16!==s;s++)r+=f(t[s]*e.elements[s])+(15!==s?",":")");return n+r}const v=(m=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>p(e,m));var m;const g=(e,t)=>{return p(e,[1/(n=t),1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1],"translate(-50%,-50%)");var n};const y=s.forwardRef((e,t)=>{let{children:n,eps:p=.001,style:m,className:y,prepend:w,center:x,fullscreen:S,portal:b,distanceFactor:_,sprite:M=!1,transform:E=!1,occlude:T,onOcclude:A,castShadow:R,receiveShadow:U,material:B,geometry:P,zIndexRange:I=[16777271,0],calculatePosition:z=d,as:C="div",wrapperClass:F,pointerEvents:D="auto",...O}=e;const{gl:k,camera:N,scene:H,size:L,raycaster:G,events:V,viewport:$}=(0,o.C)(),[W]=s.useState(()=>document.createElement(C)),j=s.useRef(null),q=s.useRef(null),X=s.useRef(0),Q=s.useRef([0,0]),K=s.useRef(null),Y=s.useRef(null),Z=(null==b?void 0:b.current)||V.connected||k.domElement.parentNode,J=s.useRef(null),ee=s.useRef(!1),te=s.useMemo(()=>T&&"blending"!==T||Array.isArray(T)&&T.length&&function(e){return e&&"object"===typeof e&&"current"in e}(T[0]),[T]);s.useLayoutEffect(()=>{const e=k.domElement;T&&"blending"===T?(e.style.zIndex=`${Math.floor(I[0]/2)}`,e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)},[T]),s.useLayoutEffect(()=>{if(q.current){const e=j.current=i.createRoot(W);if(H.updateMatrixWorld(),E)W.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=z(q.current,N,L);W.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return Z&&(w?Z.prepend(W):Z.appendChild(W)),()=>{Z&&Z.removeChild(W),e.unmount()}}},[Z,E]),s.useLayoutEffect(()=>{F&&(W.className=F)},[F]);const ne=s.useMemo(()=>E?{position:"absolute",top:0,left:0,width:L.width,height:L.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:x?"translate3d(-50%,-50%,0)":"none",...S&&{top:-L.height/2,left:-L.width/2,width:L.width,height:L.height},...m},[m,x,S,L,E]),re=s.useMemo(()=>({position:"absolute",pointerEvents:D}),[D]);s.useLayoutEffect(()=>{var e,r;(ee.current=!1,E)?null==(e=j.current)||e.render(s.createElement("div",{ref:K,style:ne},s.createElement("div",{ref:Y,style:re},s.createElement("div",{ref:t,className:y,style:m,children:n})))):null==(r=j.current)||r.render(s.createElement("div",{ref:t,style:ne,className:y,children:n}))});const se=s.useRef(!0);(0,o.D)(e=>{if(q.current){N.updateMatrixWorld(),q.current.updateWorldMatrix(!0,!1);const e=E?Q.current:z(q.current,N,L);if(E||Math.abs(X.current-N.zoom)>p||Math.abs(Q.current[0]-e[0])>p||Math.abs(Q.current[1]-e[1])>p){const t=function(e,t){const n=l.setFromMatrixPosition(e.matrixWorld),r=u.setFromMatrixPosition(t.matrixWorld),s=n.sub(r),i=t.getWorldDirection(c);return s.angleTo(i)>Math.PI/2}(q.current,N);let n=!1;te&&(Array.isArray(T)?n=T.map(e=>e.current):"blending"!==T&&(n=[H]));const r=se.current;if(n){const e=function(e,t,n,r){const s=l.setFromMatrixPosition(e.matrixWorld),i=s.clone();i.project(t),h.set(i.x,i.y),n.setFromCamera(h,t);const a=n.intersectObjects(r,!0);if(a.length){const e=a[0].distance;return s.distanceTo(n.ray.origin)<e}return!0}(q.current,N,G,n);se.current=e&&!t}else se.current=!t;r!==se.current&&(A?A(!se.current):W.style.display=se.current?"block":"none");const s=Math.floor(I[0]/2),i=T?te?[I[0],s]:[s-1,0]:I;if(W.style.zIndex=`${function(e,t,n){if(t instanceof a.ubm||t instanceof a.qUd){const r=l.setFromMatrixPosition(e.matrixWorld),s=u.setFromMatrixPosition(t.matrixWorld),i=r.distanceTo(s),a=(n[1]-n[0])/(t.far-t.near),o=n[1]-a*t.far;return Math.round(a*i+o)}}(q.current,N,i)}`,E){const[e,t]=[L.width/2,L.height/2],n=N.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:s,left:i,bottom:a,right:o}=N,l=v(N.matrixWorldInverse),u=r?`scale(${n})translate(${f(-(o+i)/2)}px,${f((s+a)/2)}px)`:`translateZ(${n}px)`;let c=q.current.matrixWorld;M&&(c=N.matrixWorldInverse.clone().transpose().copyPosition(c).scale(q.current.scale),c.elements[3]=c.elements[7]=c.elements[11]=0,c.elements[15]=1),W.style.width=L.width+"px",W.style.height=L.height+"px",W.style.perspective=r?"":`${n}px`,K.current&&Y.current&&(K.current.style.transform=`${u}${l}translate(${e}px,${t}px)`,Y.current.style.transform=g(c,1/((_||10)/400)))}else{const t=void 0===_?1:function(e,t){if(t instanceof a.qUd)return t.zoom;if(t instanceof a.ubm){const n=l.setFromMatrixPosition(e.matrixWorld),r=u.setFromMatrixPosition(t.matrixWorld),s=t.fov*Math.PI/180,i=n.distanceTo(r);return 1/(2*Math.tan(s/2)*i)}return 1}(q.current,N)*_;W.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}Q.current=e,X.current=N.zoom}}if(!te&&J.current&&!ee.current)if(E){if(K.current){const e=K.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const{isOrthographicCamera:t}=N;if(t||P)O.scale&&(Array.isArray(O.scale)?O.scale instanceof a.Pq0?J.current.scale.copy(O.scale.clone().divideScalar(1)):J.current.scale.set(1/O.scale[0],1/O.scale[1],1/O.scale[2]):J.current.scale.setScalar(1/O.scale));else{const t=(_||10)/400,n=e.clientWidth*t,r=e.clientHeight*t;J.current.scale.set(n,r,1)}ee.current=!0}}}else{const t=W.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const e=1/$.factor,n=t.clientWidth*e,r=t.clientHeight*e;J.current.scale.set(n,r,1),ee.current=!0}J.current.lookAt(e.camera.position)}});const ie=s.useMemo(()=>({vertexShader:E?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom"\n            is false.\n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n\n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "}),[E]);return s.createElement("group",(0,r.A)({},O,{ref:q}),T&&!te&&s.createElement("mesh",{castShadow:R,receiveShadow:U,ref:J},P||s.createElement("planeGeometry",null),B||s.createElement("shaderMaterial",{side:a.$EB,vertexShader:ie.vertexShader,fragmentShader:ie.fragmentShader})))})},375:(e,t,n)=>{n.d(t,{mK:()=>Fe,s0:()=>Pe});var r=n(579),s=n(43),i=n(435),a=n(299),o=.001,l=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){"undefined"!==typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*o}get fixedDelta(){return this._fixedDelta*o}set fixedDelta(e){this._fixedDelta=1e3*e}get elapsed(){return this._elapsed*o}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==e?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},u=(()=>{const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),n=new i.LoY;return n.setAttribute("position",new i.THS(e,3)),n.setAttribute("uv",new i.THS(t,2)),n})(),c=class e{static get fullscreenGeometry(){return u}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pass",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Z58,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new i.i7d;this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;null!==t&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(t){let n=this.screen;null!==n?n.material=t:(n=new i.eaF(e.fullscreenGeometry,t),n.frustumCulled=!1,null===this.scene&&(this.scene=new i.Z58),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e){arguments.length>1&&void 0!==arguments[1]||i.Rkk}render(e,t,n,r,s){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(const t of Object.keys(this)){const n=this[t];(n instanceof i.nWS||n instanceof i.imn||n instanceof i.gPd||n instanceof e)&&this[t].dispose()}null!==this.fullscreenMaterial&&this.fullscreenMaterial.dispose()}},h=class extends c{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,r,s){const i=e.state.buffers.stencil;i.setLocked(!1),i.setTest(!1)}},d="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",f=class extends i.BKk{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new i.nc$(null),opacity:new i.nc$(1)},blending:i.XIg,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <colorspace_fragment>\n#include <dithering_fragment>\n}",vertexShader:d})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},p=class extends c{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super("CopyPass"),this.fullscreenMaterial=new f,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new i.nWS(1,1,{minFilter:i.k6q,magFilter:i.k6q,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,n,r,s){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==i.OUM?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":null!==e&&e.outputColorSpace===i.er$&&(this.renderTarget.texture.colorSpace=i.er$))}},v=new i.Q1f,m=class extends c{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,n){this.color=e,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,n,r,s){const i=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),l=null!==i,u=a>=0;l?(e.getClearColor(v),e.setClearColor(i,u?a:o)):u&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(v,o):u&&e.setClearAlpha(o)}},g=class extends c{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new m(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,n,r,s){const i=e.getContext(),a=e.state.buffers,o=this.scene,l=this.camera,u=this.clearPass,c=this.inverted?0:1,h=1-c;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),a.stencil.setFunc(i.ALWAYS,c,4294967295),a.stencil.setClear(h),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(n),e.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(i.EQUAL,1,4294967295),a.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),a.stencil.setLocked(!0)}},y=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.renderer=null,this.inputBuffer=this.createBuffer(t,n,s,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new p,this.depthTexture=null,this.passes=[],this.timer=new l,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){const t=e.getSize(new i.I9Y),n=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===i.OUM&&e.outputColorSpace===i.er$&&(this.inputBuffer.texture.colorSpace=i.er$,this.outputBuffer.texture.colorSpace=i.er$,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(e,n,r)}}replaceRenderer(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(e),t&&null!==r&&(r.removeChild(n.domElement),r.appendChild(e.domElement)),n}createDepthTexture(){const e=this.depthTexture=new i.VCu;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=i.dcC,e.type=i.V3x):e.type=i.bkx,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,r){const s=this.renderer,a=null===s?new i.I9Y:s.getDrawingBufferSize(new i.I9Y),o={minFilter:i.k6q,magFilter:i.k6q,stencilBuffer:t,depthBuffer:e,type:n},l=new i.nWS(a.width,a.height,o);return r>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=r),n===i.OUM&&null!==s&&s.outputColorSpace===i.er$&&(l.texture.colorSpace=i.er$),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const n=this.passes,r=this.renderer,s=r.getDrawingBufferSize(new i.I9Y),a=r.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(s.width,s.height),e.initialize(r,a,o),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){const t=this.createDepthTexture();for(e of n)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,n=t.indexOf(e);if(-1!==n&&t.splice(n,1).length>0){if(null!==this.depthTexture){const n=(e,t)=>e||t.needsDepthTexture;t.reduce(n,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,n=this.copyPass;let r,s,i,a=this.inputBuffer,o=this.outputBuffer,l=!1;void 0===e&&(this.timer.update(),e=this.timer.getDelta());for(const u of this.passes)u.enabled&&(u.render(t,a,o,e,l),u.needsSwap&&(l&&(n.renderToScreen=u.renderToScreen,r=t.getContext(),s=t.state.buffers.stencil,s.setFunc(r.NOTEQUAL,1,4294967295),n.render(t,a,o,e,l),s.setFunc(r.EQUAL,1,4294967295)),i=a,a=o,o=i),u instanceof g?l=!0:u instanceof h&&(l=!1))}setSize(e,t,n){const r=this.renderer,s=r.getSize(new i.I9Y);void 0!==e&&void 0!==t||(e=s.width,t=s.height),s.width===e&&s.height===t||r.setSize(e,t,n);const a=r.getDrawingBufferSize(new i.I9Y);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const i of this.passes)i.setSize(a.width,a.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),c.fullscreenGeometry.dispose()}},w={NONE:0,DEPTH:1,CONVOLUTION:2},x={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},S=class{constructor(){this.shaderParts=new Map([[x.FRAGMENT_HEAD,null],[x.FRAGMENT_MAIN_UV,null],[x.FRAGMENT_MAIN_IMAGE,null],[x.VERTEX_HEAD,null],[x.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=w.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=i.Zr2}};function b(e){let t;if(0===e)t=new Float64Array(0);else if(1===e)t=new Float64Array([1]);else if(e>1){let n=new Float64Array(e),r=new Float64Array(e);for(let s=1;s<=e;++s){for(let e=0;e<s;++e)r[e]=0===e||e===s-1?1:n[e-1]+n[e];t=r,r=n,n=t}}return t}var _=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;this.weights=null,this.offsets=null,this.linearWeights=null,this.linearOffsets=null,this.generate(e,t)}get steps(){return null===this.offsets?0:this.offsets.length}get linearSteps(){return null===this.linearOffsets?0:this.linearOffsets.length}generate(e,t){if(e<3||e>1020)throw new Error("The kernel size must be in the range [3, 1020]");const n=e+2*t,r=t>0?b(n).slice(t,-t):b(n),s=Math.floor((r.length-1)/2),i=r.reduce((e,t)=>e+t,0),a=r.slice(s),o=[...Array(s+1).keys()],l=new Float64Array(Math.floor(o.length/2)),u=new Float64Array(l.length);l[0]=a[0]/i;for(let h=1,d=1,f=o.length-1;h<f;h+=2,++d){const e=o[h],t=o[h+1],n=a[h],r=a[h+1],s=n+r,c=(e*n+t*r)/s;l[d]=s/i,u[d]=c}for(let h=0,d=a.length,f=1/i;h<d;++h)a[h]*=f;const c=2*(l.reduce((e,t)=>e+t,0)-.5*l[0]);if(0!==c)for(let h=0,d=l.length,f=1/c;h<d;++h)l[h]*=f;this.offsets=o,this.weights=a,this.linearOffsets=u,this.linearWeights=l}},M=!1,E=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case i.$EB:t=this.materialsFlatShadedDoubleSide;break;case i.hsX:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case i.$EB:t=this.materialsDoubleSide;break;case i.hsX:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof i.BKk))return e.clone();const t=e.uniforms,n=new Map;for(const s in t){const e=t[s].value;e.isRenderTargetTexture&&(t[s].value=null,n.set(s,e))}const r=e.clone();for(const s of n)t[s[0]].value=s[1],r.uniforms[s[0]].value=s[1];return r}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const n of t)n.uniforms=Object.assign({},e.uniforms),n.side=i.hB5;t[2].skinning=!0,this.materialsBackSide=t.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.side=i.hsX,n}),this.materialsDoubleSide=t.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.side=i.$EB,n}),this.materialsFlatShaded=t.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=t.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=i.hsX,n}),this.materialsFlatShadedDoubleSide=t.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=i.$EB,n})}}render(e,t,n){const r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,M){const r=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(const e of r)e[0].material=e[1];this.meshCount!==r.size&&r.clear()}else{const r=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=r}e.shadowMap.enabled=r}disposeMaterials(){if(null!==this.material){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return M}static set workaroundEnabled(e){M=e}},T=-1,A=class extends i.Qev{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.resizable=e,this.baseSize=new i.I9Y(1,1),this.preferredSize=new i.I9Y(t,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new i.I9Y,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,n=this.effectiveSize,r=this.scale;t.width!==T?n.width=t.width:t.height!==T?n.width=Math.round(t.height*(e.width/Math.max(e.height,1))):n.width=Math.round(e.width*r),t.height!==T?n.height=t.height:t.width!==T?n.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):n.height=Math.round(e.height*r)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(T),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){this.baseSize.width===e&&this.baseSize.height===t||(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){this.preferredSize.width===e&&this.preferredSize.height===t||(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return T}},R=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.nextId=e}getNextId(){return this.nextId++}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.nextId=e,this}}(2),U=(Set,{SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32}),B=new Map([[U.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),opacity);}"],[U.ALPHA,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}"],[U.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),opacity);}"],[U.COLOR,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[U.COLOR_BURN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),opacity);}"],[U.COLOR_DODGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),opacity);}"],[U.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),opacity);}"],[U.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),opacity);}"],[U.DIVIDE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),opacity);}"],[U.DST,null],[U.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),opacity);}"],[U.HARD_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),opacity);}"],[U.HARD_MIX,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),opacity);}"],[U.HUE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),opacity);}"],[U.INVERT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),opacity);}"],[U.INVERT_RGB,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),opacity);}"],[U.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),opacity);}"],[U.LINEAR_BURN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}"],[U.LINEAR_DODGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),opacity);}"],[U.LINEAR_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}"],[U.LUMINOSITY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[U.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),opacity);}"],[U.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),opacity);}"],[U.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[U.OVERLAY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),opacity);}"],[U.PIN_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),opacity);}"],[U.REFLECT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),opacity);}"],[U.SATURATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[U.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),opacity);}"],[U.SOFT_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),opacity);}"],[U.SRC,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[U.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),opacity);}"],[U.VIVID_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),opacity);}"]]),P=class extends i.Qev{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this._blendFunction=e,this.opacity=new i.nc$(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return B.get(this.blendFunction)}},I=(i.GOR,class extends i.Qev{constructor(e,t){let{attributes:n=w.NONE,blendFunction:r=U.NORMAL,defines:s=new Map,uniforms:a=new Map,extensions:o=null,vertexShader:l=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=l,this.defines=s,this.uniforms=a,this.extensions=o,this.blendMode=new P(r),this.blendMode.addEventListener("change",e=>this.setChanged()),this._inputColorSpace=i.Zr2,this._outputColorSpace=i.jf0}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e){arguments.length>1&&void 0!==arguments[1]||i.Rkk}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof i.nWS||t instanceof i.imn||t instanceof i.gPd||t instanceof c)&&this[e].dispose()}}}),z={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},C=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],F=class extends i.BKk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.IUQ;super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new i.nc$(null),texelSize:new i.nc$(new i.IUQ),scale:new i.nc$(1),kernel:new i.nc$(0)},blending:i.XIg,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.setTexelSize(e.x,e.y),this.kernelSize=z.MEDIUM}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return C[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,.5*e,.5*t)}setSize(e,t){const n=1/e,r=1/t;this.uniforms.texelSize.value.set(n,r,.5*n,.5*r)}},D=class extends c{constructor(){let{kernelSize:e=z.MEDIUM,resolutionScale:t=.5,width:n=A.AUTO_SIZE,height:r=A.AUTO_SIZE,resolutionX:s=n,resolutionY:a=r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("KawaseBlurPass"),this.renderTargetA=new i.nWS(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new A(this,s,a,t);o.addEventListener("change",e=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new F,this._blurMaterial.kernelSize=e,this.copyMaterial=new f}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,s){const i=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,c=u.kernelSequence;let h=t;this.fullscreenMaterial=u;for(let d=0,f=c.length;d<f;++d){const t=0===(1&d)?o:l;u.kernel=c[d],u.inputBuffer=h.texture,e.setRenderTarget(t),e.render(i,a),h=t}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(i,a)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t);const r=n.width,s=n.height;this.renderTargetA.setSize(r,s),this.renderTargetB.setSize(r,s),this.blurMaterial.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==i.OUM?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):null!==e&&e.outputColorSpace===i.er$&&(this.renderTargetA.texture.colorSpace=i.er$,this.renderTargetB.texture.colorSpace=i.er$))}static get AUTO_SIZE(){return A.AUTO_SIZE}},O=class extends i.BKk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super({name:"LuminanceMaterial",defines:{THREE_REVISION:i.sPf.replace(/\D+/g,"")},uniforms:{inputBuffer:new i.nc$(null),threshold:new i.nc$(0),smoothing:new i.nc$(1),range:new i.nc$(null)},blending:i.XIg,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l)*l;\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:d}),this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return null!==this.luminanceRange}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},k=class extends c{constructor(){let{renderTarget:e,luminanceRange:t,colorOutput:n,resolutionScale:r=1,width:s=A.AUTO_SIZE,height:a=A.AUTO_SIZE,resolutionX:o=s,resolutionY:l=a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("LuminancePass"),this.fullscreenMaterial=new O(n,t),this.needsSwap=!1,this.renderTarget=e,void 0===this.renderTarget&&(this.renderTarget=new i.nWS(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const u=this.resolution=new A(this,o,l,r);u.addEventListener("change",e=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,n,r,s){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}initialize(e,t,n){void 0!==n&&n!==i.OUM&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},N=class extends i.BKk{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new i.nc$(null),texelSize:new i.nc$(new i.I9Y)},blending:i.XIg,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}"})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},H=class extends i.BKk{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new i.nc$(null),supportBuffer:new i.nc$(null),texelSize:new i.nc$(new i.I9Y),radius:new i.nc$(.85)},blending:i.XIg,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}"})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},L=class extends c{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new i.nWS(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new N,this.upsamplingMaterial=new H,this.resolution=new i.I9Y}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<e;++n){const e=t.clone();e.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(e)}this.upsamplingMipmaps.push(t);for(let n=1,r=e-1;n<r;++n){const e=t.clone();e.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(e)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,n,r,s){const{scene:i,camera:a}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:c}=this;let h=t;this.fullscreenMaterial=o;for(let d=0,f=u.length;d<f;++d){const t=u[d];o.setSize(h.width,h.height),o.inputBuffer=h.texture,e.setRenderTarget(t),e.render(i,a),h=t}this.fullscreenMaterial=l;for(let d=c.length-1;d>=0;--d){const t=c[d];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=u[d].texture,e.setRenderTarget(t),e.render(i,a),h=t}}setSize(e,t){const n=this.resolution;n.set(e,t);let r=n.width,s=n.height;for(let i=0,a=this.downsamplingMipmaps.length;i<a;++i)r=Math.round(.5*r),s=Math.round(.5*s),this.downsamplingMipmaps[i].setSize(r,s),i<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[i].setSize(r,s)}initialize(e,t,n){if(void 0!==n){const t=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const e of t)e.texture.type=n;if(n!==i.OUM)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(null!==e&&e.outputColorSpace===i.er$)for(const e of t)e.texture.colorSpace=i.er$}}dispose(){super.dispose();for(const e of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))e.dispose()}},G=class extends I{constructor(){let{blendFunction:e=U.SCREEN,luminanceThreshold:t=1,luminanceSmoothing:n=.03,mipmapBlur:r=!0,intensity:s=1,radius:a=.85,levels:o=8,kernelSize:l=z.LARGE,resolutionScale:u=.5,width:c=A.AUTO_SIZE,height:h=A.AUTO_SIZE,resolutionX:d=c,resolutionY:f=h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}",{blendFunction:e,uniforms:new Map([["map",new i.nc$(null)],["intensity",new i.nc$(s)]])}),this.renderTarget=new i.nWS(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new D({kernelSize:l}),this.luminancePass=new k({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new L,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=a,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const p=this.resolution=new A(this,d,f,u);p.addEventListener("change",e=>this.setSize(p.baseWidth,p.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,n){const r=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,s.renderTarget):this.blurPass.render(e,s.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,r)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,n){this.blurPass.initialize(e,t,n),this.luminancePass.initialize(e,t,n),this.mipmapBlurPass.initialize(e,t,n),void 0!==n&&(this.renderTarget.texture.type=n,null!==e&&e.outputColorSpace===i.er$&&(this.renderTarget.texture.colorSpace=i.er$))}},V=0,$=0;i.BKk;function W(e,t,n){return e*(t-n)-t}function j(e,t,n){return Math.min(Math.max((e+t)/(t-n),0),1)}i.BKk,i.BKk;i.GYF;var q=1,X=2,Q=(i.BKk,i.BKk,class extends c{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new m,this.overrideMaterialManager=null===n?null:new E(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new E(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,n,r,s){const i=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,u=i.background,c=e.shadowMap.autoUpdate,h=this.renderToScreen?null:t;null!==o&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(i.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(h),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,i,a):e.render(i,a),a.layers.mask=l,i.background=u,e.shadowMap.autoUpdate=c}}),K="lut.scaleup";function Y(e,t,n){const r=document.createElement("canvas"),s=r.getContext("2d");if(r.width=e,r.height=t,n instanceof Image)s.drawImage(n,0,0);else{const r=s.createImageData(e,t);r.data.set(n),s.putImageData(r,0,0)}return r}var Z=class e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.width=e,this.height=t,this.data=n}toCanvas(){return"undefined"===typeof document?null:Y(this.width,this.height,this.data)}static from(t){const{width:n,height:r}=t;let s;if(t instanceof Image){const e=Y(n,r,t);if(null!==e){s=e.getContext("2d").getImageData(0,0,n,r).data}}else s=t.data;return new e(n,r,s)}},J=new i.Q1f,ee=(i.dYF,{FULL:0,SINGLE:1}),te={DEPTH:0,LUMA:1,COLOR:2},ne=(i.BKk,i.BKk,Math.PI,i.BKk,i.BKk,i.BKk,class extends i.BKk{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new i.nc$(null),normalBuffer:new i.nc$(null),texelSize:new i.nc$(new i.I9Y)},blending:i.XIg,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\n#ifdef DOWNSAMPLE_NORMALS\nuniform lowp sampler2D normalBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);\n#ifdef DOWNSAMPLE_NORMALS\nvec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;\n#else\nvec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);\n#endif\ngl_FragColor=vec4(n[index],d[index]);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}"})}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Rkk;this.depthBuffer=e,this.depthPacking=t}set normalBuffer(e){this.uniforms.normalBuffer.value=e,null!==e?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(e){this.normalBuffer=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}}),re=class extends c{constructor(){let{normalBuffer:e=null,resolutionScale:t=.5,width:n=A.AUTO_SIZE,height:r=A.AUTO_SIZE,resolutionX:s=n,resolutionY:a=r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("DepthDownsamplingPass");const o=new ne;o.normalBuffer=e,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new i.nWS(1,1,{minFilter:i.hxR,magFilter:i.hxR,depthBuffer:!1,type:i.RQf}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const l=this.resolution=new A(this,s,a,t);l.addEventListener("change",e=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Rkk;this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t}render(e,t,n,r,s){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(e,t)}initialize(e,t,n){const r=e.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},se=(i.BKk,i.BKk,i.BKk,"#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <colorspace_fragment>\n#endif\n#include <dithering_fragment>\n}"),ie="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",ae=class extends i.BKk{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super({name:"EffectMaterial",defines:{THREE_REVISION:i.sPf.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new i.nc$(null),depthBuffer:new i.nc$(null),resolution:new i.nc$(new i.I9Y),texelSize:new i.nc$(new i.I9Y),cameraNear:new i.nc$(.3),cameraFar:new i.nc$(1e3),aspect:new i.nc$(1),time:new i.nc$(0)},blending:i.XIg,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),e&&this.setShaderParts(e),t&&this.setDefines(t),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Rkk;this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader=se.replace(x.FRAGMENT_HEAD,e.get(x.FRAGMENT_HEAD)||"").replace(x.FRAGMENT_MAIN_UV,e.get(x.FRAGMENT_MAIN_UV)||"").replace(x.FRAGMENT_MAIN_IMAGE,e.get(x.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=ie.replace(x.VERTEX_HEAD,e.get(x.VERTEX_HEAD)||"").replace(x.VERTEX_MAIN_SUPPORT,e.get(x.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof i.ubm?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}static get Section(){return x}},oe=(i.BKk,Number(i.sPf.replace(/\D+/g,"")),255/256);new Float32Array([5.9371814131736755e-8,oe/65536,.0038909912109375,oe]),new Float32Array([oe,.0038909912109375,oe/65536,1/256**3]);function le(e,t,n){for(const r of t){const t="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const e of n.entries())null!==e[1]&&n.set(e[0],e[1].replace(s,t))}}function ue(e,t,n){let r=t.getFragmentShader(),s=t.getVertexShader();const a=void 0!==r&&/mainImage/.test(r),o=void 0!==r&&/mainUv/.test(r);if(n.attributes|=t.getAttributes(),void 0===r)throw new Error(`Missing fragment shader (${t.name})`);if(o&&0!==(n.attributes&w.CONVOLUTION))throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!a&&!o)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,u=n.shaderParts;let c=u.get(x.FRAGMENT_HEAD)||"",h=u.get(x.FRAGMENT_MAIN_UV)||"",d=u.get(x.FRAGMENT_MAIN_IMAGE)||"",f=u.get(x.VERTEX_HEAD)||"",p=u.get(x.VERTEX_MAIN_SUPPORT)||"";const v=new Set,m=new Set;if(o&&(h+=`\t${e}MainUv(UV);\n`,n.uvTransformation=!0),null!==s&&/mainSupport/.test(s)){const t=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);p+=`\t${e}MainSupport(`,p+=t?"vUv);\n":");\n";for(const e of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const t of e[1].split(/\s*,\s*/))n.varyings.add(t),v.add(t),m.add(t);for(const e of s.matchAll(l))m.add(e[1])}for(const e of r.matchAll(l))m.add(e[1]);for(const e of t.defines.keys())m.add(e.replace(/\([\w\s,]*\)/g,""));for(const e of t.uniforms.keys())m.add(e);m.delete("while"),m.delete("for"),m.delete("if"),t.uniforms.forEach((t,r)=>n.uniforms.set(e+r.charAt(0).toUpperCase()+r.slice(1),t)),t.defines.forEach((t,r)=>n.defines.set(e+r.charAt(0).toUpperCase()+r.slice(1),t));const g=new Map([["fragment",r],["vertex",s]]);le(e,m,n.defines),le(e,m,g),r=g.get("fragment"),s=g.get("vertex");const y=t.blendMode;if(n.blendModes.set(y.blendFunction,y),a){null!==t.inputColorSpace&&t.inputColorSpace!==n.colorSpace&&(d+=t.inputColorSpace===i.er$?"color0 = sRGBTransferOETF(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),t.outputColorSpace!==i.jf0?n.colorSpace=t.outputColorSpace:null!==t.inputColorSpace&&(n.colorSpace=t.inputColorSpace);const s=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+=`${e}MainImage(color0, UV, `,0!==(n.attributes&w.DEPTH)&&s.test(r)&&(d+="depth, ",n.readDepth=!0),d+="color1);\n\t";const a=e+"BlendOpacity";n.uniforms.set(a,y.opacity),d+=`color0 = blend${y.blendFunction}(color0, color1, ${a});\n\n\t`,c+=`uniform float ${a};\n\n`}if(c+=r+"\n",null!==s&&(f+=s+"\n"),u.set(x.FRAGMENT_HEAD,c),u.set(x.FRAGMENT_MAIN_UV,h),u.set(x.FRAGMENT_MAIN_IMAGE,d),u.set(x.VERTEX_HEAD,f),u.set(x.VERTEX_MAIN_SUPPORT,p),null!==t.extensions)for(const e of t.extensions)n.extensions.add(e)}}var ce=class extends c{constructor(e){super("EffectPass"),this.fullscreenMaterial=new ae(null,null,null,e),this.listener=e=>this.handleEvent(e),this.effects=[];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.setEffects(n),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=e.sort((e,t)=>t.attributes-e.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const e=new S;let t=0;for(const i of this.effects)if(i.blendMode.blendFunction===U.DST)e.attributes|=i.getAttributes()&w.DEPTH;else{if(0!==(e.attributes&i.getAttributes()&w.CONVOLUTION))throw new Error(`Convolution effects cannot be merged (${i.name})`);ue("e"+t++,i,e)}let n=e.shaderParts.get(x.FRAGMENT_HEAD),r=e.shaderParts.get(x.FRAGMENT_MAIN_IMAGE),s=e.shaderParts.get(x.FRAGMENT_MAIN_UV);const a=/\bblend\b/g;for(const i of e.blendModes.values())n+=i.getShaderCode().replace(a,`blend${i.blendFunction}`)+"\n";0!==(e.attributes&w.DEPTH)?(e.readDepth&&(r="float depth = readDepth(UV);\n\n\t"+r),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,e.colorSpace===i.er$&&(r+="color0 = sRGBToLinear(color0);\n\t"),e.uvTransformation?(s="vec2 transformedUv = vUv;\n"+s,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(x.FRAGMENT_HEAD,n),e.shaderParts.set(x.FRAGMENT_MAIN_IMAGE,r),e.shaderParts.set(x.FRAGMENT_MAIN_UV,s);for(const[i,o]of e.shaderParts)null!==o&&e.shaderParts.set(i,o.trim().replace(/^#/,"\n#"));this.skipRendering=0===t,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Rkk;this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const n of this.effects)n.setDepthTexture(e,t)}render(e,t,n,r,s){for(const i of this.effects)i.update(e,t,r);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=t.texture,s.time+=r*this.timeScale,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const n of this.effects)n.setSize(e,t)}initialize(e,t,n){this.renderer=e;for(const r of this.effects)r.initialize(e,t,n);this.updateMaterial(),void 0!==n&&n!==i.OUM&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){if("change"===e.type)this.recompile()}},he=class extends c{constructor(e,t){let{renderTarget:n,resolutionScale:r=1,width:s=A.AUTO_SIZE,height:a=A.AUTO_SIZE,resolutionX:o=s,resolutionY:l=a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super("NormalPass"),this.needsSwap=!1,this.renderPass=new Q(e,t,new i.qBx);const u=this.renderPass;u.ignoreBackground=!0,u.skipShadowMapUpdate=!0;const c=u.getClearPass();c.overrideClearColor=new i.Q1f(7829503),c.overrideClearAlpha=1,this.renderTarget=n,void 0===this.renderTarget&&(this.renderTarget=new i.nWS(1,1,{minFilter:i.hxR,magFilter:i.hxR}),this.renderTarget.texture.name="NormalPass.Target");const h=this.resolution=new A(this,o,l,r);h.addEventListener("change",e=>this.setSize(h.baseWidth,h.baseHeight))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,s){const i=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,i,i)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}};new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]);new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]);fe(0,0,0,0),new Float32Array([0,0,0,0]),fe(0,0,0,1),new Float32Array([0,0,0,1]),fe(0,0,1,0),new Float32Array([0,0,1,0]),fe(0,0,1,1),new Float32Array([0,0,1,1]),fe(0,1,0,0),new Float32Array([0,1,0,0]),fe(0,1,0,1),new Float32Array([0,1,0,1]),fe(0,1,1,0),new Float32Array([0,1,1,0]),fe(0,1,1,1),new Float32Array([0,1,1,1]),fe(1,0,0,0),new Float32Array([1,0,0,0]),fe(1,0,0,1),new Float32Array([1,0,0,1]),fe(1,0,1,0),new Float32Array([1,0,1,0]),fe(1,0,1,1),new Float32Array([1,0,1,1]),fe(1,1,0,0),new Float32Array([1,1,0,0]),fe(1,1,0,1),new Float32Array([1,1,0,1]),fe(1,1,1,0),new Float32Array([1,1,1,0]),fe(1,1,1,1),new Float32Array([1,1,1,1]);function de(e,t,n){return e+(t-e)*n}function fe(e,t,n,r){const s=de(e,t,.75),i=de(n,r,.75);return de(s,i,.875)}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){return ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ve(e,t)}function me(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}new i.I9Y,new i.I9Y;function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ye=function e(t,n,r){var s=this;ge(this,e),pe(this,"dot2",function(e,t){return s.x*e+s.y*t}),pe(this,"dot3",function(e,t,n){return s.x*e+s.y*t+s.z*n}),this.x=t,this.y=n,this.z=r},we=[new ye(1,1,0),new ye(-1,1,0),new ye(1,-1,0),new ye(-1,-1,0),new ye(1,0,1),new ye(-1,0,1),new ye(1,0,-1),new ye(-1,0,-1),new ye(0,1,1),new ye(0,-1,1),new ye(0,1,-1),new ye(0,-1,-1)],xe=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Se=new Array(512),be=new Array(512),_e=function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;n=1&t?xe[t]^255&e:xe[t]^e>>8&255,Se[t]=Se[t+256]=n,be[t]=be[t+256]=we[n%12]}};_e(0);Math.sqrt(3),Math.sqrt(3),Math.PI;function Me(e){var t=function(e){if("number"===typeof e)e=Math.abs(e);else if("string"===typeof e){var t=e;e=0;for(var n=0;n<t.length;n++)e=(e+(n+1)*(t.charCodeAt(n)%96))%2147483647}return 0===e&&(e=311),e}(e);return function(){var e=48271*t%2147483647;return t=e,e/2147483647}}var Ee=function e(t){var n=this;ge(this,e),pe(this,"seed",0),pe(this,"init",function(e){n.seed=e,n.value=Me(e)}),pe(this,"value",Me(this.seed)),this.init(t)};new Ee(Math.random());function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Ae(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}i.LoY;new i.qUd(-1,1,1,-1,0,1);class Re extends i.LoY{constructor(){super(),this.setAttribute("position",new i.qtW([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new i.qtW([0,2,0,0,2,0],2))}}new Re;i.LoY;i.nWS;const Ue=(0,s.createContext)(null),Be=e=>2===(2&e.getAttributes()),Pe=(0,s.memo)((0,s.forwardRef)((e,t)=>{let{children:n,camera:o,scene:l,resolutionScale:u,enabled:h=!0,renderPriority:d=1,autoClear:f=!0,depthBuffer:p,enableNormalPass:v,stencilBuffer:m,multisampling:g=8,frameBufferType:w=i.ix0}=e;const{gl:x,scene:S,camera:b,size:_}=(0,a.C)(),M=l||S,E=o||b,[T,A,R]=(0,s.useMemo)(()=>{const e=new y(x,{depthBuffer:p,stencilBuffer:m,multisampling:g,frameBufferType:w});e.addPass(new Q(M,E));let t=null,n=null;return v&&(n=new he(M,E),n.enabled=!1,e.addPass(n),void 0!==u&&(t=new re({normalBuffer:n.texture,resolutionScale:u}),t.enabled=!1,e.addPass(t))),[e,n,t]},[E,x,p,m,g,w,M,v,u]);(0,s.useEffect)(()=>T?.setSize(_.width,_.height),[T,_]),(0,a.D)((e,t)=>{if(h){const e=x.autoClear;x.autoClear=f,m&&!f&&x.clearStencil(),T.render(t),x.autoClear=e}},h?d:0);const U=(0,s.useRef)(null);(0,s.useLayoutEffect)(()=>{const e=[],t=U.current.__r3f;if(t&&T){const n=t.children;for(let t=0;t<n.length;t++){const r=n[t].object;if(r instanceof I){const s=[r];if(!Be(r)){let e=null;for(;(e=n[t+1]?.object)instanceof I&&!Be(e);)s.push(e),t++}const i=new ce(E,...s);e.push(i)}else r instanceof c&&e.push(r)}for(const t of e)T?.addPass(t);A&&(A.enabled=!0),R&&(R.enabled=!0)}return()=>{for(const t of e)T?.removePass(t);A&&(A.enabled=!1),R&&(R.enabled=!1)}},[T,n,E,A,R]),(0,s.useEffect)(()=>{const e=x.toneMapping;return x.toneMapping=i.y_p,()=>{x.toneMapping=e}},[x]);const B=(0,s.useMemo)(()=>({composer:T,normalPass:A,downSamplingPass:R,resolutionScale:u,camera:E,scene:M}),[T,A,R,u,E,M]);return(0,s.useImperativeHandle)(t,()=>T,[T]),(0,r.jsx)(Ue.Provider,{value:B,children:(0,r.jsx)("group",{ref:U,children:n})})}));let Ie=0;const ze=new WeakMap,Ce=(e,t)=>function(n){let{blendFunction:i=t?.blendFunction,opacity:o=t?.opacity,...l}=n,u=ze.get(e);if(!u){const t=`@react-three/postprocessing/${e.name}-${Ie++}`;(0,a.e)({[t]:e}),ze.set(e,u=t)}const c=(0,a.C)(e=>e.camera),h=s.useMemo(()=>[...t?.args??[],...l.args??[{...t,...l}]],[JSON.stringify(l)]);return(0,r.jsx)(u,{camera:c,"blendMode-blendFunction":i,"blendMode-opacity-value":o,...l,args:h})};const Fe=Ce(G,{blendFunction:0})},555:(e,t,n)=>{n.d(t,{aq:()=>Re,RV:()=>_,Ec:()=>Be,MI:()=>Ae,Tj:()=>Q,kx:()=>pe,Rs:()=>Ge,OX:()=>E,HX:()=>Xe,ZJ:()=>je,__:()=>R,FI:()=>U,le:()=>Se,bX:()=>P,Wd:()=>C,WU:()=>$,Wg:()=>Te,oq:()=>Ee,at:()=>Me,is:()=>T,$7:()=>Qe,n4:()=>A,lQ:()=>M,er:()=>s,DV:()=>Pe,$r:()=>B,CH:()=>Ze,Es:()=>Ke,H5:()=>Je,NQ:()=>tt});var r=w(),s=e=>v(e,r),i=w();s.write=e=>v(e,i);var a=w();s.onStart=e=>v(e,a);var o=w();s.onFrame=e=>v(e,o);var l=w();s.onFinish=e=>v(e,l);var u=[];s.setTimeout=(e,t)=>{const n=s.now()+t,r=()=>{const e=u.findIndex(e=>e.cancel==r);~e&&u.splice(e,1),f-=~e?1:0},i={time:n,handler:e,cancel:r};return u.splice(c(n),0,i),f+=1,m(),i};var c=e=>~(~u.findIndex(t=>t.time>e)||~u.length);s.cancel=e=>{a.delete(e),o.delete(e),l.delete(e),r.delete(e),i.delete(e)},s.sync=e=>{p=!0,s.batchedUpdates(e),p=!1},s.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t=r,s.onStart(n)}return r.handler=e,r.cancel=()=>{a.delete(n),t=null},r};var h="undefined"!=typeof window?window.requestAnimationFrame:()=>{};s.use=e=>h=e,s.now="undefined"!=typeof performance?()=>performance.now():Date.now,s.batchedUpdates=e=>e(),s.catch=console.error,s.frameLoop="always",s.advance=()=>{"demand"!==s.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):y()};var d=-1,f=0,p=!1;function v(e,t){p?(t.delete(e),e(0)):(t.add(e),m())}function m(){d<0&&(d=0,"demand"!==s.frameLoop&&h(g))}function g(){~d&&(h(g),s.batchedUpdates(y))}function y(){const e=d;d=s.now();const t=c(d);t&&(x(u.splice(0,t),e=>e.handler()),f-=t),f?(a.flush(),r.flush(e?Math.min(64,d-e):16.667),o.flush(),i.flush(),l.flush()):d=-1}function w(){let e=new Set,t=e;return{add(n){f+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(f-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,f-=t.size,x(t,t=>t(n)&&e.add(t)),f+=e.size,t=e)}}}function x(e,t){e.forEach(e=>{try{t(e)}catch(n){s.catch(n)}})}var S=n(43),b=Object.defineProperty,_={};function M(){}((e,t)=>{for(var n in t)b(e,n,{get:t[n],enumerable:!0})})(_,{assign:()=>N,colors:()=>D,createStringInterpolator:()=>I,skipAnimation:()=>O,to:()=>z,willAdvance:()=>k});var E=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),T={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,und:e=>void 0===e};function A(e,t){if(T.arr(e)){if(!T.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var R=(e,t)=>e.forEach(t);function U(e,t,n){if(T.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var B=e=>T.und(e)?[]:T.arr(e)?e:[e];function P(e,t){if(e.size){const n=Array.from(e);e.clear(),R(n,t)}}var I,z,C=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return P(e,e=>e(...n))},F=()=>"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),D=null,O=!1,k=M,N=e=>{e.to&&(z=e.to),e.now&&(s.now=e.now),void 0!==e.colors&&(D=e.colors),null!=e.skipAnimation&&(O=e.skipAnimation),e.createStringInterpolator&&(I=e.createStringInterpolator),e.requestAnimationFrame&&s.use(e.requestAnimationFrame),e.batchedUpdates&&(s.batchedUpdates=e.batchedUpdates),e.willAdvance&&(k=e.willAdvance),e.frameLoop&&(s.frameLoop=e.frameLoop)},H=new Set,L=[],G=[],V=0,$={get idle(){return!H.size&&!L.length},start(e){V>e.priority?(H.add(e),s.onStart(W)):(j(e),s(X))},advance:X,sort(e){if(V)s.onFrame(()=>$.sort(e));else{const t=L.indexOf(e);~t&&(L.splice(t,1),q(e))}},clear(){L=[],H.clear()}};function W(){H.forEach(j),H.clear(),s(X)}function j(e){L.includes(e)||q(e)}function q(e){L.splice(function(e,t){const n=e.findIndex(t);return n<0?e.length:n}(L,t=>t.priority>e.priority),0,e)}function X(e){const t=G;for(let n=0;n<L.length;n++){const r=L[n];V=r.priority,r.idle||(k(r),r.advance(e),r.idle||t.push(r))}return V=0,(G=L).length=0,(L=t).length>0}var Q={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},K="[-+]?\\d*\\.?\\d+",Y=K+"%";function Z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var J=new RegExp("rgb"+Z(K,K,K)),ee=new RegExp("rgba"+Z(K,K,K,K)),te=new RegExp("hsl"+Z(K,Y,Y)),ne=new RegExp("hsla"+Z(K,Y,Y,K)),re=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,se=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ie=/^#([0-9a-fA-F]{6})$/,ae=/^#([0-9a-fA-F]{8})$/;function oe(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function le(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,i=oe(s,r,e+1/3),a=oe(s,r,e),o=oe(s,r,e-1/3);return Math.round(255*i)<<24|Math.round(255*a)<<16|Math.round(255*o)<<8}function ue(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function ce(e){return(parseFloat(e)%360+360)%360/360}function he(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function de(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function fe(e){let t=function(e){let t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=ie.exec(e))?parseInt(t[1]+"ff",16)>>>0:D&&void 0!==D[e]?D[e]:(t=J.exec(e))?(ue(t[1])<<24|ue(t[2])<<16|ue(t[3])<<8|255)>>>0:(t=ee.exec(e))?(ue(t[1])<<24|ue(t[2])<<16|ue(t[3])<<8|he(t[4]))>>>0:(t=re.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=ae.exec(e))?parseInt(t[1],16)>>>0:(t=se.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=te.exec(e))?(255|le(ce(t[1]),de(t[2]),de(t[3])))>>>0:(t=ne.exec(e))?(le(ce(t[1]),de(t[2]),de(t[3]))|he(t[4]))>>>0:null}(e);if(null===t)return e;t=t||0;return`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`}var pe=(e,t,n)=>{if(T.fun(e))return e;if(T.arr(e))return pe({range:e,output:t,extrapolate:n});if(T.str(e.output[0]))return I(e);const r=e,s=r.output,i=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",o=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,i);return function(e,t,n,r,s,i,a,o,l){let u=l?l(e):e;if(u<t){if("identity"===a)return u;"clamp"===a&&(u=t)}if(u>n){if("identity"===o)return u;"clamp"===o&&(u=n)}if(r===s)return r;if(t===n)return e<=t?r:s;t===-1/0?u=-u:n===1/0?u-=t:u=(u-t)/(n-t);u=i(u),r===-1/0?u=-u:s===1/0?u+=r:u=u*(s-r)+r;return u}(e,i[t],i[t+1],s[t],s[t+1],l,a,o,r.map)}};var ve=1.70158,me=1.525*ve,ge=ve+1,ye=2*Math.PI/3,we=2*Math.PI/4.5,xe=e=>{const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},Se={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>ge*e*e*e-ve*e*e,easeOutBack:e=>1+ge*Math.pow(e-1,3)+ve*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-me)/2:(Math.pow(2*e-2,2)*((me+1)*(2*e-2)+me)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*ye),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*ye)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*we)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*we)/2+1,easeInBounce:e=>1-xe(1-e),easeOutBounce:xe,easeInOutBounce:e=>e<.5?(1-xe(1-2*e))/2:(1+xe(2*e-1))/2,steps:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";return n=>{const r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e,s="end"===t?Math.floor(r):Math.ceil(r);return i=0,a=1,o=s/e,Math.min(Math.max(o,i),a);var i,a,o}}},be=Symbol.for("FluidValue.get"),_e=Symbol.for("FluidValue.observers"),Me=e=>Boolean(e&&e[be]),Ee=e=>e&&e[be]?e[be]():e,Te=e=>e[_e]||null;function Ae(e,t){const n=e[_e];n&&n.forEach(e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)})}var Re=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Ue(this,e)}},Ue=(e,t)=>ze(e,be,t);function Be(e,t){if(e[be]){let n=e[_e];n||ze(e,_e,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Pe(e,t){const n=e[_e];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[_e]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Ie,ze=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),Ce=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Fe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,De=new RegExp(`(${Ce.source})(%|[a-z]+)`,"i"),Oe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,ke=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Ne=e=>{const[t,n]=He(e);if(!t||F())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&ke.test(n)?Ne(n):n||e},He=e=>{const t=ke.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},Le=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,Ge=e=>{Ie||(Ie=D?new RegExp(`(${Object.keys(D).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(e=>Ee(e).replace(ke,Ne).replace(Fe,fe).replace(Ie,fe)),n=t.map(e=>e.match(Ce).map(Number)),r=n[0].map((e,t)=>n.map(e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})).map(t=>pe({...e,output:t}));return e=>{const n=!De.test(t[0])&&t.find(e=>De.test(e))?.replace(Ce,"");let s=0;return t[0].replace(Ce,()=>`${r[s++](e)}${n||""}`).replace(Oe,Le)}},Ve="react-spring: ",$e=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError(`${Ve}once requires a function parameter`);return function(){n||(t(...arguments),n=!0)}},We=$e(console.warn);function je(){We(`${Ve}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var qe=$e(console.warn);function Xe(){qe(`${Ve}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Qe(e){return T.str(e)&&("#"==e[0]||/\d/.test(e)||!F()&&ke.test(e)||e in(D||{}))}var Ke=F()?S.useEffect:S.useLayoutEffect,Ye=()=>{const e=(0,S.useRef)(!1);return Ke(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function Ze(){const e=(0,S.useState)()[1],t=Ye();return()=>{t.current&&e(Math.random())}}var Je=e=>(0,S.useEffect)(e,et),et=[];function tt(e){const t=(0,S.useRef)(void 0);return(0,S.useEffect)(()=>{t.current=e}),t.current}},724:(e,t,n)=>{n.d(t,{CS:()=>u,zh:()=>s.zh});var r=n(299),s=n(814),i=n(555),a=n(86),o=n(408),l=["primitive"].concat(Object.keys(o).filter(e=>/^[A-Z]/.test(e)).map(e=>e[0].toLowerCase()+e.slice(1)));s.RV.assign({createStringInterpolator:i.Rs,colors:i.Tj,frameLoop:"demand"}),(0,r.j)(()=>{i.er.advance()});var u=(0,a.De)(l,{applyAnimatedValues:r.s}).animated},814:(e,t,n)=>{n.d(t,{RV:()=>r.RV,zh:()=>he});var r=n(555),s=n(43),i=n(86);function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return r.is.fun(e)?e(...n):e}var o=(e,t)=>!0===e||!!(t&&e&&(r.is.fun(e)?e(t):(0,r.$r)(e).includes(t))),l=(e,t)=>r.is.obj(e)?t&&e[t]:e,u=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,c=e=>e,h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,n=d;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));const s={};for(const i of n){const n=t(e[i],i);r.is.und(n)||(s[i]=n)}return s},d=["config","onProps","onStart","onChange","onPause","onResume","onRest"],f={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function p(e){const t=function(e){const t={};let n=0;if((0,r.FI)(e,(e,r)=>{f[r]||(t[r]=e,n++)}),n)return t}(e);if(t){const n={to:t};return(0,r.FI)(e,(e,r)=>r in t||(n[r]=e)),n}return{...e}}function v(e){return e=(0,r.oq)(e),r.is.arr(e)?e.map(v):(0,r.$7)(e)?r.RV.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function m(e){for(const t in e)return!0;return!1}function g(e){return r.is.fun(e)||r.is.arr(e)&&r.is.obj(e[0])}function y(e,t){e.ref?.delete(e),t?.delete(e)}function w(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var x={tension:170,friction:26,mass:1,damping:1,easing:r.le.linear,clamp:!1},S=class{constructor(){this.velocity=0,Object.assign(this,x)}};function b(e,t){if(r.is.und(t.decay)){const n=!r.is.und(t.tension)||!r.is.und(t.friction);!n&&r.is.und(t.frequency)&&r.is.und(t.damping)&&r.is.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var _=[],M=class{constructor(){this.changed=!1,this.values=_,this.toValues=null,this.fromValues=_,this.config=new S,this.immediate=!1}};function E(e,t){let{key:n,props:s,defaultProps:i,state:l,actions:u}=t;return new Promise((t,c)=>{let h,d,f=o(s.cancel??i?.cancel,n);if(f)m();else{r.is.und(s.pause)||(l.paused=o(s.pause,n));let e=i?.pause;!0!==e&&(e=l.paused||o(e,n)),h=a(s.delay||0,n),e?(l.resumeQueue.add(v),u.pause()):(u.resume(),v())}function p(){l.resumeQueue.add(v),l.timeouts.delete(d),d.cancel(),h=d.time-r.er.now()}function v(){h>0&&!r.RV.skipAnimation?(l.delayed=!0,d=r.er.setTimeout(m,h),l.pauseQueue.add(p),l.timeouts.add(d)):m()}function m(){l.delayed&&(l.delayed=!1),l.pauseQueue.delete(p),l.timeouts.delete(d),e<=(l.cancelId||0)&&(f=!0);try{u.start({...s,callId:e,cancel:f},t)}catch(n){c(n)}}})}var T=(e,t)=>1==t.length?t[0]:t.some(e=>e.cancelled)?U(e.get()):t.every(e=>e.noop)?A(e.get()):R(e.get(),t.every(e=>e.finished)),A=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),R=function(e,t){return{value:e,finished:t,cancelled:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},U=e=>({value:e,cancelled:!0,finished:!1});function B(e,t,n,s){const{callId:i,parentId:a,onRest:o}=t,{asyncTo:l,promise:u}=n;return a||e!==l||t.reset?n.promise=(async()=>{n.asyncId=i,n.asyncTo=e;const c=h(t,(e,t)=>"onRest"===t?void 0:e);let d,f;const p=new Promise((e,t)=>(d=e,f=t)),v=e=>{const t=i<=(n.cancelId||0)&&U(s)||i!==n.asyncId&&R(s,!1);if(t)throw e.result=t,f(e),e},m=(e,t)=>{const a=new I,o=new z;return(async()=>{if(r.RV.skipAnimation)throw P(n),o.result=R(s,!1),f(o),o;v(a);const l=r.is.obj(e)?{...e}:{...t,to:e};l.parentId=i,(0,r.FI)(c,(e,t)=>{r.is.und(l[t])&&(l[t]=e)});const u=await s.start(l);return v(a),n.paused&&await new Promise(e=>{n.resumeQueue.add(e)}),u})()};let g;if(r.RV.skipAnimation)return P(n),R(s,!1);try{let t;t=r.is.arr(e)?(async e=>{for(const t of e)await m(t)})(e):Promise.resolve(e(m,s.stop.bind(s))),await Promise.all([t.then(d),p]),g=R(s.get(),!0,!1)}catch(y){if(y instanceof I)g=y.result;else{if(!(y instanceof z))throw y;g=y.result}}finally{i==n.asyncId&&(n.asyncId=a,n.asyncTo=a?l:void 0,n.promise=a?u:void 0)}return r.is.fun(o)&&r.er.batchedUpdates(()=>{o(g,s,s.item)}),g})():u}function P(e,t){(0,r.bX)(e.timeouts,e=>e.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var I=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},z=class extends Error{constructor(){super("SkipAnimationSignal")}},C=e=>e instanceof D,F=1,D=class extends r.aq{constructor(){super(...arguments),this.id=F++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=(0,i.Ao)(this);return e&&e.getValue()}to(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.RV.to(this,t)}interpolate(){(0,r.ZJ)();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.RV.to(this,t)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,r.MI)(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||r.WU.sort(this),(0,r.MI)(this,{type:"priority",parent:this,priority:e})}},O=Symbol.for("SpringPhase"),k=e=>(1&e[O])>0,N=e=>(2&e[O])>0,H=e=>(4&e[O])>0,L=(e,t)=>t?e[O]|=3:e[O]&=-3,G=(e,t)=>t?e[O]|=4:e[O]&=-5,V=class extends D{constructor(e,t){if(super(),this.animation=new M,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!r.is.und(e)||!r.is.und(t)){const n=r.is.obj(e)?{...e}:{...t,from:e};r.is.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(N(this)||this._state.asyncTo)||H(this)}get goal(){return(0,r.oq)(this.animation.to)}get velocity(){const e=(0,i.Ao)(this);return e instanceof i.rf?e.lastVelocity||0:e.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return k(this)}get isAnimating(){return N(this)}get isPaused(){return H(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const s=this.animation;let{toValues:a}=s;const{config:o}=s,l=(0,i.nm)(s.to);!l&&(0,r.at)(s.to)&&(a=(0,r.$r)((0,r.oq)(s.to))),s.values.forEach((u,c)=>{if(u.done)return;const h=u.constructor==i.pS?1:l?l[c].lastPosition:a[c];let d=s.immediate,f=h;if(!d){if(f=u.lastPosition,o.tension<=0)return void(u.done=!0);let t=u.elapsedTime+=e;const n=s.fromValues[c],i=null!=u.v0?u.v0:u.v0=r.is.arr(o.velocity)?o.velocity[c]:o.velocity;let a;const l=o.precision||(n==h?.005:Math.min(1,.001*Math.abs(h-n)));if(r.is.und(o.duration))if(o.decay){const e=!0===o.decay?.998:o.decay,r=Math.exp(-(1-e)*t);f=n+i/(1-e)*(1-r),d=Math.abs(u.lastPosition-f)<=l,a=i*r}else{a=null==u.lastVelocity?i:u.lastVelocity;const t=o.restVelocity||l/10,s=o.clamp?0:o.bounce,c=!r.is.und(s),p=n==h?u.v0>0:n<h;let v,m=!1;const g=1,y=Math.ceil(e/g);for(let e=0;e<y&&(v=Math.abs(a)>t,v||(d=Math.abs(h-f)<=l,!d));++e){c&&(m=f==h||f>h==p,m&&(a=-a*s,f=h));a+=(1e-6*-o.tension*(f-h)+.001*-o.friction*a)/o.mass*g,f+=a*g}}else{let r=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,u.durationProgress>0&&(u.elapsedTime=o.duration*u.durationProgress,t=u.elapsedTime+=e)),r=(o.progress||0)+t/this._memoizedDuration,r=r>1?1:r<0?0:r,u.durationProgress=r),f=n+o.easing(r)*(h-n),a=(f-u.lastPosition)/e,d=1==r}u.lastVelocity=a,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),d=!0)}l&&!l[c].done&&(d=!1),d?u.done=!0:t=!1,u.setValue(f,o.round)&&(n=!0)});const u=(0,i.Ao)(this),c=u.getValue();if(t){const e=(0,r.oq)(s.to);c===e&&!n||o.decay?n&&o.decay&&this._onChange(c):(u.setValue(e),this._onChange(e)),this._stop()}else n&&this._onChange(c)}set(e){return r.er.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(N(this)){const{to:e,config:t}=this.animation;r.er.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return r.is.und(e)?(n=this.queue||[],this.queue=[]):n=[r.is.obj(e)?e:{...t,to:e}],Promise.all(n.map(e=>this._update(e))).then(e=>T(this,e))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),P(this._state,e&&this._lastCallId),r.er.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:s}=e;n=r.is.obj(n)?n[t]:n,(null==n||g(n))&&(n=void 0),s=r.is.obj(s)?s[t]:s,null==s&&(s=void 0);const a={to:n,from:s};return k(this)||(e.reverse&&([n,s]=[s,n]),s=(0,r.oq)(s),r.is.und(s)?(0,i.Ao)(this)||this._set(n):this._set(s)),a}_update(e,t){let{...n}=e;const{key:s,defaultProps:i}=this;n.default&&Object.assign(i,h(n,(e,t)=>/^on/.test(t)?l(e,s):e)),K(this,n,"onProps"),Y(this,"onProps",n,this);const a=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const o=this._state;return E(++this._lastCallId,{key:s,props:n,defaultProps:i,state:o,actions:{pause:()=>{H(this)||(G(this,!0),(0,r.Wd)(o.pauseQueue),Y(this,"onPause",R(this,$(this,this.animation.to)),this))},resume:()=>{H(this)&&(G(this,!1),N(this)&&this._resume(),(0,r.Wd)(o.resumeQueue),Y(this,"onResume",R(this,$(this,this.animation.to)),this))},start:this._merge.bind(this,a)}}).then(e=>{if(n.loop&&e.finished&&(!t||!e.noop)){const e=W(n);if(e)return this._update(e,!0)}return e})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(U(this));const s=!r.is.und(e.to),l=!r.is.und(e.from);if(s||l){if(!(t.callId>this._lastToId))return n(U(this));this._lastToId=t.callId}const{key:u,defaultProps:c,animation:h}=this,{to:d,from:f}=h;let{to:p=d,from:m=f}=e;!l||s||t.default&&!r.is.und(p)||(p=m),t.reverse&&([p,m]=[m,p]);const y=!(0,r.n4)(m,f);y&&(h.from=m),m=(0,r.oq)(m);const w=!(0,r.n4)(p,d);w&&this._focus(p);const S=g(t.to),{config:_}=h,{decay:M,velocity:E}=_;(s||l)&&(_.velocity=0),t.config&&!S&&function(e,t,n){n&&(b(n={...n},t),t={...n,...t}),b(e,t),Object.assign(e,t);for(const r in x)null==e[r]&&(e[r]=x[r]);let{frequency:s,damping:i}=e;const{mass:a}=e;r.is.und(s)||(s<.01&&(s=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/s,2)*a,e.friction=4*Math.PI*i*a/s)}(_,a(t.config,u),t.config!==c.config?a(c.config,u):void 0);let T=(0,i.Ao)(this);if(!T||r.is.und(p))return n(R(this,!0));const P=r.is.und(t.reset)?l&&!t.default:!r.is.und(m)&&o(t.reset,u),I=P?m:this.get(),z=v(p),C=r.is.num(z)||r.is.arr(z)||(0,r.$7)(z),F=!S&&(!C||o(c.immediate||t.immediate,u));if(w){const e=(0,i.SJ)(p);if(e!==T.constructor){if(!F)throw Error(`Cannot animate between ${T.constructor.name} and ${e.name}, as the "to" prop suggests`);T=this._set(z)}}const D=T.constructor;let O=(0,r.at)(p),H=!1;if(!O){const e=P||!k(this)&&y;(w||e)&&(H=(0,r.n4)(v(I),z),O=!H),((0,r.n4)(h.immediate,F)||F)&&(0,r.n4)(_.decay,M)&&(0,r.n4)(_.velocity,E)||(O=!0)}if(H&&N(this)&&(h.changed&&!P?O=!0:O||this._stop(d)),!S&&((O||(0,r.at)(d))&&(h.values=T.getPayload(),h.toValues=(0,r.at)(p)?null:D==i.pS?[1]:(0,r.$r)(z)),h.immediate!=F&&(h.immediate=F,F||P||this._set(d)),O)){const{onRest:e}=h;(0,r.__)(Q,e=>K(this,t,e));const s=R(this,$(this,d));(0,r.Wd)(this._pendingCalls,s),this._pendingCalls.add(n),h.changed&&r.er.batchedUpdates(()=>{h.changed=!P,e?.(s,this),P?a(c.onRest,s):h.onStart?.(s,this)})}P&&this._set(I),S?n(B(t.to,t,this._state,this)):O?this._start():N(this)&&!w?this._pendingCalls.add(n):n(A(I))}_focus(e){const t=this.animation;e!==t.to&&((0,r.Wg)(this)&&this._detach(),t.to=e,(0,r.Wg)(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;(0,r.at)(t)&&((0,r.Ec)(t,this),C(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;(0,r.at)(e)&&(0,r.DV)(e,this)}_set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,r.oq)(e);if(!r.is.und(n)){const e=(0,i.Ao)(this);if(!e||!(0,r.n4)(n,e.getValue())){const s=(0,i.SJ)(n);e&&e.constructor==s?e.setValue(n):(0,i.uX)(this,s.create(n)),e&&r.er.batchedUpdates(()=>{this._onChange(n,t)})}}return(0,i.Ao)(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Y(this,"onStart",R(this,$(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),a(this.animation.onChange,e,this)),a(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;(0,i.Ao)(this).reset((0,r.oq)(e.to)),e.immediate||(e.fromValues=e.values.map(e=>e.lastPosition)),N(this)||(L(this,!0),H(this)||this._resume())}_resume(){r.RV.skipAnimation?this.finish():r.WU.start(this)}_stop(e,t){if(N(this)){L(this,!1);const n=this.animation;(0,r.__)(n.values,e=>{e.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),(0,r.MI)(this,{type:"idle",parent:this});const s=t?U(this.get()):R(this.get(),$(this,e??n.to));(0,r.Wd)(this._pendingCalls,s),n.changed&&(n.changed=!1,Y(this,"onRest",s,this))}}};function $(e,t){const n=v(t),s=v(e.get());return(0,r.n4)(s,n)}function W(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to;const r=a(t);if(r){const s=!0!==r&&p(r),i=(s||e).reverse,a=!s||s.reset;return j({...e,loop:t,default:!1,pause:void 0,to:!i||g(n)?n:void 0,from:a?e.from:void 0,reset:a,...s})}}function j(e){const{to:t,from:n}=e=p(e),s=new Set;return r.is.obj(t)&&X(t,s),r.is.obj(n)&&X(n,s),e.keys=s.size?Array.from(s):null,e}function q(e){const t=j(e);return r.is.und(t.default)&&(t.default=h(t)),t}function X(e,t){(0,r.FI)(e,(e,n)=>null!=e&&t.add(n))}var Q=["onStart","onRest","onChange","onPause","onResume"];function K(e,t,n){e.animation[n]=t[n]!==u(t,n)?l(t[n],e.key):void 0}function Y(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];e.animation[t]?.(...r),e.defaultProps[t]?.(...r)}var Z=["onStart","onChange","onRest"],J=1,ee=class{constructor(e,t){this.id=J++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];r.is.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(j(e)),this}start(e){let{queue:t}=this;return e?t=(0,r.$r)(e).map(j):this.queue=[],this._flush?this._flush(this,t):(oe(this,t),te(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;(0,r.__)((0,r.$r)(t),t=>n[t].stop(!!e))}else P(this._state,this._lastAsyncId),this.each(t=>t.stop(!!e));return this}pause(e){if(r.is.und(e))this.start({pause:!0});else{const t=this.springs;(0,r.__)((0,r.$r)(e),e=>t[e].pause())}return this}resume(e){if(r.is.und(e))this.start({pause:!1});else{const t=this.springs;(0,r.__)((0,r.$r)(e),e=>t[e].resume())}return this}each(e){(0,r.FI)(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,s=this._active.size>0,i=this._changed.size>0;(s&&!this._started||i&&!this._started)&&(this._started=!0,(0,r.bX)(e,e=>{let[t,n]=e;n.value=this.get(),t(n,this,this._item)}));const a=!s&&this._started,o=i||a&&n.size?this.get():null;i&&t.size&&(0,r.bX)(t,e=>{let[t,n]=e;n.value=o,t(n,this,this._item)}),a&&(this._started=!1,(0,r.bX)(n,e=>{let[t,n]=e;n.value=o,t(n,this,this._item)}))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}r.er.onFrame(this._onFrame)}};function te(e,t){return Promise.all(t.map(t=>ne(e,t))).then(t=>T(e,t))}async function ne(e,t,n){const{keys:s,to:i,from:a,loop:o,onRest:l,onResolve:c}=t,h=r.is.obj(t.default)&&t.default;o&&(t.loop=!1),!1===i&&(t.to=null),!1===a&&(t.from=null);const d=r.is.arr(i)||r.is.fun(i)?i:void 0;d?(t.to=void 0,t.onRest=void 0,h&&(h.onRest=void 0)):(0,r.__)(Z,n=>{const s=t[n];if(r.is.fun(s)){const r=e._events[n];t[n]=e=>{let{finished:t,cancelled:n}=e;const i=r.get(s);i?(t||(i.finished=!1),n&&(i.cancelled=!0)):r.set(s,{value:null,finished:t||!1,cancelled:n||!1})},h&&(h[n]=t[n])}});const f=e._state;t.pause===!f.paused?(f.paused=t.pause,(0,r.Wd)(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);const p=(s||Object.keys(e.springs)).map(n=>e.springs[n].start(t)),v=!0===t.cancel||!0===u(t,"cancel");(d||v&&f.asyncId)&&p.push(E(++e._lastAsyncId,{props:t,state:f,actions:{pause:r.lQ,resume:r.lQ,start(t,n){v?(P(f,e._lastAsyncId),n(U(e))):(t.onRest=l,n(B(d,t,f,e)))}}})),f.paused&&await new Promise(e=>{f.resumeQueue.add(e)});const m=T(e,await Promise.all(p));if(o&&m.finished&&(!n||!m.noop)){const n=W(t,o,i);if(n)return oe(e,[n]),ne(e,n,!0)}return c&&r.er.batchedUpdates(()=>c(m,e,e.item)),m}function re(e,t){const n={...e.springs};return t&&(0,r.__)((0,r.$r)(t),e=>{r.is.und(e.keys)&&(e=j(e)),r.is.obj(e.to)||(e={...e,to:void 0}),ae(n,e,e=>ie(e))}),se(e,n),n}function se(e,t){(0,r.FI)(t,(t,n)=>{e.springs[n]||(e.springs[n]=t,(0,r.Ec)(t,e))})}function ie(e,t){const n=new V;return n.key=e,t&&(0,r.Ec)(n,t),n}function ae(e,t,n){t.keys&&(0,r.__)(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function oe(e,t){(0,r.__)(t,t=>{ae(e.springs,t,t=>ie(t,e))})}var le=s.createContext({pause:!1,immediate:!1}),ue=()=>{const e=[],t=function(t){(0,r.HX)();const s=[];return(0,r.__)(e,(e,i)=>{if(r.is.und(t))s.push(e.start());else{const r=n(t,e,i);r&&s.push(e.start(r))}}),s};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){return(0,r.__)(e,e=>e.pause(...arguments)),this},t.resume=function(){return(0,r.__)(e,e=>e.resume(...arguments)),this},t.set=function(t){(0,r.__)(e,(e,n)=>{const s=r.is.fun(t)?t(n,e):t;s&&e.set(s)})},t.start=function(t){const n=[];return(0,r.__)(e,(e,s)=>{if(r.is.und(t))n.push(e.start());else{const r=this._getProps(t,e,s);r&&n.push(e.start(r))}}),n},t.stop=function(){return(0,r.__)(e,e=>e.stop(...arguments)),this},t.update=function(t){return(0,r.__)(e,(e,n)=>e.update(this._getProps(t,e,n))),this};const n=function(e,t,n){return r.is.fun(e)?e(n,t):e};return t._getProps=n,t};function ce(e,t,n){const i=r.is.fun(t)&&t;i&&!n&&(n=[]);const a=(0,s.useMemo)(()=>i||3==arguments.length?ue():void 0,[]),o=(0,s.useRef)(0),l=(0,r.CH)(),u=(0,s.useMemo)(()=>({ctrls:[],queue:[],flush(e,t){const n=re(e,t);return o.current>0&&!u.queue.length&&!Object.keys(n).some(t=>!e.springs[t])?te(e,t):new Promise(r=>{se(e,n),u.queue.push(()=>{r(te(e,t))}),l()})}}),[]),c=(0,s.useRef)([...u.ctrls]),h=(0,s.useRef)([]),d=(0,r.NQ)(e)||0;function f(e,n){for(let r=e;r<n;r++){const e=c.current[r]||(c.current[r]=new ee(null,u.flush)),n=i?i(r,e):t[r];n&&(h.current[r]=q(n))}}(0,s.useMemo)(()=>{(0,r.__)(c.current.slice(e,d),e=>{y(e,a),e.stop(!0)}),c.current.length=e,f(d,e)},[e]),(0,s.useMemo)(()=>{f(0,Math.min(d,e))},n);const p=c.current.map((e,t)=>re(e,h.current[t])),v=(0,s.useContext)(le),g=(0,r.NQ)(v),x=v!==g&&m(v);(0,r.Es)(()=>{o.current++,u.ctrls=c.current;const{queue:e}=u;e.length&&(u.queue=[],(0,r.__)(e,e=>e())),(0,r.__)(c.current,(e,t)=>{a?.add(e),x&&e.start({default:v});const n=h.current[t];n&&(w(e,n.ref),e.ref?e.queue.push(n):e.start(n))})}),(0,r.H5)(()=>()=>{(0,r.__)(u.ctrls,e=>e.stop(!0))});const S=p.map(e=>({...e}));return a?[S,a]:S}function he(e,t){const n=r.is.fun(e),[[s],i]=ce(1,n?e:[e],n?t||[]:t);return n||2==arguments.length?[s,i]:s}var de=class extends D{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=(0,r.kx)(...t);const n=this._get(),s=(0,i.SJ)(n);(0,i.uX)(this,s.create(n))}advance(e){const t=this._get(),n=this.get();(0,r.n4)(t,n)||((0,i.Ao)(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&pe(this._active)&&ve(this)}_get(){const e=r.is.arr(this.source)?this.source.map(r.oq):(0,r.$r)((0,r.oq)(this.source));return this.calc(...e)}_start(){this.idle&&!pe(this._active)&&(this.idle=!1,(0,r.__)((0,i.nm)(this),e=>{e.done=!1}),r.RV.skipAnimation?(r.er.batchedUpdates(()=>this.advance()),ve(this)):r.WU.start(this))}_attach(){let e=1;(0,r.__)((0,r.$r)(this.source),t=>{(0,r.at)(t)&&(0,r.Ec)(t,this),C(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){(0,r.__)((0,r.$r)(this.source),e=>{(0,r.at)(e)&&(0,r.DV)(e,this)}),this._active.clear(),ve(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=(0,r.$r)(this.source).reduce((e,t)=>Math.max(e,(C(t)?t.priority:0)+1),0))}};function fe(e){return!1!==e.idle}function pe(e){return!e.size||Array.from(e).every(fe)}function ve(e){e.idle||(e.idle=!0,(0,r.__)((0,i.nm)(e),e=>{e.done=!0}),(0,r.MI)(e,{type:"idle",parent:e}))}r.RV.assign({createStringInterpolator:r.Rs,to:(e,t)=>new de(e,t)});r.WU.advance},836:(e,t,n)=>{n.d(t,{b:()=>o});var r=n(168),s=n(43),i=n(435);const a=1e-5;const o=s.forwardRef(function(e,t){let{args:[n=1,i=1,a=1]=[],radius:o=.05,steps:u=1,smoothness:c=4,bevelSegments:h=4,creaseAngle:d=.4,children:f,...p}=e;return s.createElement("mesh",(0,r.A)({ref:t},p),s.createElement(l,{args:[n,i,a],radius:o,steps:u,smoothness:c,bevelSegments:h,creaseAngle:d}),f)}),l=s.forwardRef(function(e,t){let{args:[n=1,o=1,l=1]=[],radius:u=.05,steps:c=1,smoothness:h=4,bevelSegments:d=4,creaseAngle:f=.4,...p}=e;const v=s.useMemo(()=>function(e,t,n){const r=new i.ypk,s=n-a;return r.absarc(a,a,a,-Math.PI/2,-Math.PI,!0),r.absarc(a,t-2*s,a,Math.PI,Math.PI/2,!0),r.absarc(e-2*s,t-2*s,a,Math.PI/2,0,!0),r.absarc(e-2*s,a,a,0,-Math.PI/2,!0),r}(n,o,u),[n,o,u]),m=s.useMemo(()=>({depth:l-2*u,bevelEnabled:!0,bevelSegments:2*d,steps:c,bevelSize:u-a,bevelThickness:u,curveSegments:h}),[l,u,h,d,c]),g=s.useRef(null);return s.useLayoutEffect(()=>{g.current&&(g.current.center(),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/3;const n=Math.cos(t),r=100*(1+1e-10),s=[new i.Pq0,new i.Pq0,new i.Pq0],a=new i.Pq0,o=new i.Pq0,l=new i.Pq0,u=new i.Pq0;function c(e){return`${~~(e.x*r)},${~~(e.y*r)},${~~(e.z*r)}`}const h=e.index?e.toNonIndexed():e,d=h.attributes.position,f={};for(let m=0,g=d.count/3;m<g;m++){const e=3*m,t=s[0].fromBufferAttribute(d,e+0),n=s[1].fromBufferAttribute(d,e+1),r=s[2].fromBufferAttribute(d,e+2);a.subVectors(r,n),o.subVectors(t,n);const l=(new i.Pq0).crossVectors(a,o).normalize();for(let i=0;i<3;i++){const e=c(s[i]);e in f||(f[e]=[]),f[e].push(l)}}const p=new Float32Array(3*d.count),v=new i.THS(p,3,!1);for(let i=0,m=d.count/3;i<m;i++){const e=3*i,t=s[0].fromBufferAttribute(d,e+0),r=s[1].fromBufferAttribute(d,e+1),h=s[2].fromBufferAttribute(d,e+2);a.subVectors(h,r),o.subVectors(t,r),l.crossVectors(a,o).normalize();for(let i=0;i<3;i++){const t=f[c(s[i])];u.set(0,0,0);for(let e=0,r=t.length;e<r;e++){const r=t[e];l.dot(r)>n&&u.add(r)}u.normalize(),v.setXYZ(e+i,u.x,u.y,u.z)}}h.setAttribute("normal",v)}(g.current,f))},[v,m,f]),s.useImperativeHandle(t,()=>g.current),s.createElement("extrudeGeometry",(0,r.A)({ref:g,args:[v,m]},p))})}}]);
//# sourceMappingURL=124.5a474efa.chunk.js.map