"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[228],{228:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var i=n(43),o=n(299),s=n(37),r=n(309),a=n(836),l=n(375),h=n(724),c=n(292),f=n(579);function d(e){let{height:t="92vh"}=e;const n=(0,i.useRef)(null),[o,s]=(0,i.useState)(Array.from({length:8},(e,t)=>({angle:Math.random()*Math.PI*2,dist:0,speed:.008+.012*Math.random(),radius:38+18*Math.random(),hue:360*Math.random(),t:1e3*Math.random()})));function r(e,t,n){let i,o,s;if(0===t)i=o=s=n;else{const r=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=r(l,a,e+1/3),o=r(l,a,e),s=r(l,a,e-1/3)}return[Math.round(255*i),Math.round(255*o),Math.round(255*s)]}return(0,i.useEffect)(()=>{const e=n.current;if(!e)return;let i=!0,a=window.innerWidth,l="string"===typeof t&&t.endsWith("vh")?window.innerHeight*(parseFloat(t)/100):window.innerHeight;function h(){a=window.innerWidth,l="string"===typeof t&&t.endsWith("vh")?window.innerHeight*(parseFloat(t)/100):window.innerHeight,e.width=a,e.height=l}return e.width=a,e.height=l,function t(){if(!i)return;s(e=>e.map((e,t)=>{let n=e.t+1,i=Math.min(e.dist+2*e.speed,.45*a),o=e.angle+.01*Math.sin(n/120+t),s=38+18*Math.sin(n/40+t),r=(e.hue+.3+.2*Math.sin(n/200+t))%360;return{...e,t:n,dist:i,angle:o,radius:s,hue:r}}));const n=e.getContext("2d");n.clearRect(0,0,a,l),n.globalAlpha=1,n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,a,l);const h=n.getImageData(0,0,a,l),c=h.data;for(let e=0;e<l;e+=2)for(let t=0;t<a;t+=2){let n=0,i=[0,0,0];for(let s of o){const o=t-(a/2+Math.cos(s.angle)*s.dist),h=e-(l/2+Math.sin(s.angle)*s.dist),c=s.radius;n+=c*c/(o*o+h*h+1);const f=r(s.hue/360,1,.6);i[0]+=f[0],i[1]+=f[1],i[2]+=f[2]}if(n>1.2){let s=i.map(e=>Math.min(255,e/o.length)),r=4*(e*a+t);c[r]=s[0],c[r+1]=s[1],c[r+2]=s[2],c[r+3]=Math.min(255,80*(n-1.2))}}n.putImageData(h,0,0),requestAnimationFrame(t)}(),window.addEventListener("resize",h),()=>{i=!1,window.removeEventListener("resize",h)}},[o,t]),(0,f.jsx)("canvas",{ref:n,style:{position:"absolute",top:0,left:0,width:"100vw",height:t,zIndex:2,pointerEvents:"none",mixBlendMode:"lighter"}})}function u(e){let{item:t,i:n,current:i,hovered:o,big:s,setHovered:l,N:c,radius:d}=e;const u=2*Math.PI/c*n,w=Math.sin(u)*d,g=Math.cos(u)*d,m=n===i,p=o===n,x=Date.now()/1e3+.5*n,v=.7+.3*Math.sin(x);let y=n%2===0?`hsl(${180+10*Math.sin(x)},100%,60%)`:`hsl(${50+10*Math.sin(x)},100%,60%)`,j=n%2===0?`hsl(${320+10*Math.sin(x)},100%,60%)`:`hsl(${200+10*Math.sin(x)},100%,60%)`;const M=m&&p?j:y,b=m||p?y:"#333",{scale:S,emissiveIntensity:E}=(0,h.zh)({scale:p?s?1.75:1.55:m?(s?1.65:1.45)+.05*Math.sin(Date.now()/200):1,emissiveIntensity:(m||p?1.2:.5)*v,config:{mass:1,tension:170,friction:18}}),k=Math.abs((180*u/Math.PI+360)%360)>90&&Math.abs((180*u/Math.PI+360)%360)<270,I=3===n;return(0,f.jsxs)("group",{position:[w,0,g],rotation:[0,-u,0],children:[(0,f.jsxs)("mesh",{position:[0,0,.5],onPointerOver:()=>l(n),onPointerOut:()=>l(null),children:[(0,f.jsx)("planeGeometry",{args:[s?6.5:4.5,s?4.2:3.2]}),(0,f.jsx)("meshBasicMaterial",{transparent:!0,opacity:0})]}),(0,f.jsx)(h.CS.mesh,{scale:S.to(e=>[e,e,e]),castShadow:!0,receiveShadow:!0,children:(0,f.jsxs)(a.b,{args:[s?4.8:3,s?3:2.1,s?.62:.44],radius:s?.48:.3,smoothness:6,edges:{color:M,thickness:s?2.2:1.2},children:[(0,f.jsx)(a.b,{args:[s?3.6:2.4,s?1.88:1.28,s?.17:.08],radius:s?.48:.3,smoothness:5,position:[0,0,s?.3:.21],children:(0,f.jsx)("meshPhysicalMaterial",{color:M,emissive:M,emissiveIntensity:1.7*v,opacity:.38,transparent:!0,metalness:.4,roughness:.18})}),(0,f.jsxs)("mesh",{position:[0,0,s?.46:.36],children:[(0,f.jsx)("planeGeometry",{args:[s?6:4.2,s?3.6:2.7]}),(0,f.jsx)("meshBasicMaterial",{color:M,opacity:m||p?.48:.28,transparent:!0})]}),(0,f.jsx)(h.CS.meshPhysicalMaterial,{color:"#fff",emissive:m||p?M:"#6cf",emissiveIntensity:E.to(e=>1.7*e),opacity:.95,transparent:!0,clearcoat:1,clearcoatRoughness:.15,reflectivity:.85,metalness:.2}),(0,f.jsx)("shadowMaterial",{attach:"material",opacity:.35})]})}),(0,f.jsx)(r.E,{center:!0,style:{pointerEvents:"auto",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},rotation:[0,-u,0],transform:`skewY(${6*Math.sin(u)}deg) rotateZ(${8*u/Math.PI}deg)`,children:(0,f.jsxs)("a",{href:t.link,style:{textDecoration:"none",color:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,f.jsx)("img",{src:t.img,alt:t.title,style:{width:s?195:125,height:s?138:83,borderRadius:12,boxShadow:m||p?`0 0 0 ${s?8:4}px ${b}`:`0 0 0 ${s?4:2}px #333`,marginBottom:12,opacity:m?1:.7,filter:m||p?"grayscale(10%)":"grayscale(30%) blur(1px)",transform:`skewY(${6*Math.sin(u)}deg) rotateZ(${8*u/Math.PI}deg)`,transition:"box-shadow 0.2s, filter 0.2s",display:"block",marginLeft:"auto",marginRight:"auto"}}),(0,f.jsx)("div",{style:{fontWeight:"bold",fontSize:s?"1.7em":"1.1em",color:k||m||p?"#fff":n%2===0?"#ff4fa3":"#00fff7",textShadow:m||p?"0 0 2px #000, 0 0 8px #fff":`0 0 2px ${y}`,filter:(m||p?"none":"blur(0.5px)")+" contrast(1.2) invert(1)",transform:"SensationalX Furry Night"===t.title||I?"scaleX(-1)":void 0,transition:"filter 0.2s",textAlign:"center",margin:"0 auto",width:"100%",lineHeight:1.2},children:t.title}),(0,f.jsx)("div",{style:{fontSize:s?"1.2em":"0.9em",color:k?"#fff":"#aaa",filter:"invert(1) contrast(1.2)",transition:"filter 0.2s",transform:"SensationalX Furry Night"===t.title||I?"scaleX(-1)":void 0,textAlign:"center",margin:"0 auto",width:"100%",lineHeight:1.2},children:t.desc})]})})]},n)}function w(e){let{current:t,hovered:n,setHovered:s,big:r,items:a,onItemClick:l}=e;const c=(r?10:6)+(r?1.2:.8)*Math.sqrt(a.length),d=Math.max(a.length,1),w=(0,i.useRef)(),[g,m]=(0,i.useState)(!0),[p,x]=(0,i.useState)(0),v=(0,i.useRef)(Date.now()),y=(0,i.useRef)(t),j=-2*Math.PI/d*t,{rotationY:M}=(0,h.zh)({rotationY:g?p:j,config:{mass:1,tension:170,friction:26}});(0,o.D)(()=>{g&&w.current&&x(e=>e+.008),!g&&Date.now()-v.current>3e3&&y.current===t&&m(!0)}),(0,i.useEffect)(()=>{m(!1),v.current=Date.now(),y.current=t},[t]);const{camera:b}=(0,o.C)();return(0,i.useEffect)(()=>{function e(e){const t=2*(e.clientX/window.innerWidth-.5),n=2*(e.clientY/window.innerHeight-.5);b.position.x=2.5*t,b.position.y=1.5*-n,b.lookAt(0,0,0)}return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[b]),a&&0!==a.length?(0,f.jsx)(h.CS.group,{ref:w,position:[0,0,0],"rotation-y":M,children:a.map((e,i)=>(0,f.jsx)(u,{item:e,i:i,current:t,hovered:n,big:r,setHovered:s,N:d,radius:c},i))}):null}function g(){const e=(0,i.useRef)(null);return(0,i.useEffect)(()=>{const t=e.current;if(!t)return;const n=t.getContext("2d");let i=!0,o=window.innerWidth,s=window.innerHeight;function r(){o=window.innerWidth,s=window.innerHeight,t.width=o,t.height=s}return t.width=o,t.height=s,function e(){i&&(!function(e){n.clearRect(0,0,o,s),n.fillStyle="#0a0a2a",n.fillRect(0,0,o,s);const t=o/2,i=s/2,r=Math.PI/4;n.save(),n.translate(t,i),n.rotate(r);for(let o=0;o<7;o++){const t=80+90*o+40*Math.sin(e/900+o);n.beginPath(),n.arc(0,0,t,0,2*Math.PI),n.closePath(),n.globalAlpha=.13+.07*Math.sin(e/700+o),n.fillStyle=o%2===0?"#00fff7":"#ff4fa3",n.fill()}n.restore(),n.globalAlpha=1}(Date.now()),requestAnimationFrame(e))}(),window.addEventListener("resize",r),()=>{i=!1,window.removeEventListener("resize",r)}},[]),(0,f.jsx)("canvas",{ref:e,style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",background:"#0a0a2a"}})}function m(e){let{color:t="#fff",dotSize:n=2,spacing:o=10,opacity:s=.13}=e;const r=(0,i.useRef)(null);return(0,i.useEffect)(()=>{const e=r.current;if(!e)return;let i=!0,a=window.innerWidth,l=window.innerHeight;function h(){if(!i)return;const r=e.getContext("2d");r.clearRect(0,0,a,l),r.globalAlpha=s;for(let e=0;e<l;e+=o)for(let i=0;i<a;i+=o)r.beginPath(),r.arc(i,e,n,0,2*Math.PI),r.fillStyle=t,r.fill();r.globalAlpha=1}function c(){a=window.innerWidth,l=window.innerHeight,e.width=a,e.height=l,h()}return e.width=a,e.height=l,h(),window.addEventListener("resize",c),()=>{i=!1,window.removeEventListener("resize",c)}},[t,n,o,s]),(0,f.jsx)("canvas",{ref:r,style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:1,pointerEvents:"none",mixBlendMode:"soft-light"}})}function p(e){let{direction:t,style:n}=e;const{scale:i,shadow:o}=(0,c.zh)({from:{scale:1,shadow:.5},to:async e=>{for(;;)await e({scale:1.18,shadow:1}),await e({scale:1,shadow:.5})},config:{mass:1,tension:120,friction:10},loop:!0});let s=0,r="",a="",l="";return"tl"===t&&(s=-135,r="arrowGradTL",a="#ff4fa3",l="#fff1fa"),"tr"===t&&(s=-45,r="arrowGradTR",a="#00fff7",l="#e0ffff"),"bl"===t&&(s=135,r="arrowGradBL",a="#ffe14f",l="#fffbe0"),"br"===t&&(s=45,r="arrowGradBR",a="#a080ff",l="#e0e0ff"),(0,f.jsx)(c.CS.div,{style:{position:"fixed",...n,zIndex:10002,width:72,height:72,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",pointerEvents:"none",transform:i.to(e=>`scale(${e}) rotate(${s}deg)`),filter:"drop-shadow(0 0 18px "+a+")",transition:"transform 0.2s"},children:(0,f.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("defs",{children:(0,f.jsxs)("linearGradient",{id:r,x1:"0",y1:"0",x2:"64",y2:"64",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{offset:"0%",stopColor:l}),(0,f.jsx)("stop",{offset:"60%",stopColor:a}),(0,f.jsx)("stop",{offset:"100%",stopColor:"#222"})]})}),(0,f.jsx)("rect",{x:"28",y:"16",width:"8",height:"28",rx:"4",fill:`url(#${r})`,stroke:"#fff",strokeWidth:"1.5"}),(0,f.jsx)("polygon",{points:"32,6 54,34 44,34 44,54 20,54 20,34 10,34",fill:`url(#${r})`,stroke:"#fff",strokeWidth:"2.5"}),(0,f.jsx)("ellipse",{cx:"32",cy:"22",rx:"7",ry:"2.2",fill:"#fff",opacity:"0.18"})]})})}const x=function(e){const t=i.useRef(null),n=i.useRef(null),[o,r]=(0,i.useState)(!1),[a,h]=(0,i.useState)(0),[u,x]=(0,i.useState)(null),[v,y]=(0,i.useState)([]),[j,M]=(0,i.useState)(!0),{scale:b}=(0,c.zh)({from:{scale:1},to:async e=>{for(;;)await e({scale:1.08}),await e({scale:1})},config:{mass:1,tension:120,friction:10},loop:!0}),S=()=>{const e=n.current;e&&(e.volume=.12,e.currentTime=0,e.play())};(0,i.useEffect)(()=>{function e(e){k<=0||("ArrowLeft"===e.key&&(h(e=>(e-1+k)%k),S()),"ArrowRight"===e.key&&(h(e=>(e+1)%k),S()),o||"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||E())}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o]);const E=()=>{const e=t.current;e&&(e.muted=!1,e.volume=.85,r(!0))};(0,i.useEffect)(()=>{if(!t.current)return;const e=()=>{E(),window.removeEventListener("pointerdown",e)};return window.addEventListener("pointerdown",e),()=>window.removeEventListener("pointerdown",e)},[]),(0,i.useEffect)(()=>{const e=t.current;e&&o&&e.play()},[o]),(0,i.useEffect)(()=>{fetch("https://sinbound.online.s3.amazonaws.com/public/songdatabase.json").then(e=>e.json()).then(e=>{const t=e.map(e=>({img:"/mix-coverimage/"+e.coverimage,title:e.title,desc:e.description,link:"/trackplayer?track="+e.link}));y(t),M(!1)}).catch(()=>M(!1))},[]);const k=v.length;return(0,i.useEffect)(()=>{v.length>0&&a>=v.length&&h(v.length-1),v.length>0&&a<0&&h(0)},[v,a]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g,{}),(0,f.jsx)(m,{}),(0,f.jsx)(d,{}),(0,f.jsx)(p,{direction:"tl",style:{left:12,top:12}}),(0,f.jsx)(p,{direction:"tr",style:{right:12,top:12}}),(0,f.jsx)(p,{direction:"bl",style:{left:12,bottom:12}}),(0,f.jsx)(p,{direction:"br",style:{right:12,bottom:12}}),(0,f.jsxs)("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",zIndex:10,pointerEvents:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,f.jsx)("audio",{ref:t,src:"/birkin loop.wav",preload:"auto",loop:!0,muted:!0,style:{display:"none"}}),(0,f.jsx)("audio",{ref:n,src:"https://sinbound.online.s3.amazonaws.com/public/sfx001.wav",preload:"auto",style:{display:"none"}}),(0,f.jsx)(c.CS.h1,{style:{color:"#fff",fontFamily:"MS Gothic, MS PGothic, Meiryo, monospace",fontSize:"2.6em",letterSpacing:2,textTransform:"uppercase",textAlign:"center",margin:"0 0 32px 0",textShadow:"0 0 18px #00fff7, 0 0 8px #fff",filter:"contrast(1.2)",userSelect:"none",pointerEvents:"auto",willChange:"transform",transform:b.to(e=>`scale(${e})`)},children:"choose a track"}),(0,f.jsx)("div",{style:{width:"100vw",height:"85vh",maxWidth:1600,margin:"0 auto",position:"relative",zIndex:10,pointerEvents:"auto"},children:j?(0,f.jsx)("div",{style:{color:"#fff",textAlign:"center",fontSize:24,marginTop:80},children:"Loading carousel..."}):(0,f.jsx)(f.Fragment,{children:!j&&v.length>0&&(0,f.jsxs)(s.Hl,{shadows:!0,camera:{position:[0,0,Math.max(28,18+2.5*Math.sqrt(v.length)*1.5)],fov:54},style:{width:"100%",height:"100%",background:"none",borderRadius:0,boxShadow:"none",pointerEvents:"auto"},children:[(0,f.jsx)("ambientLight",{intensity:.7}),(0,f.jsx)("directionalLight",{position:[0,8,8],intensity:1.2,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),(0,f.jsx)(l.s0,{children:(0,f.jsx)(l.mK,{luminanceThreshold:.18,luminanceSmoothing:.7,intensity:1.2})}),(0,f.jsx)(w,{current:a,hovered:u,setHovered:x,big:!0,items:v,onItemClick:e=>{window.location.href=`/trackplayer?mix=${e.id}`}})]})})})]})]})}}}]);
//# sourceMappingURL=228.595c4bfc.chunk.js.map